import{j as $}from"./react-window-Bo6ozukI.js";import{r as t}from"./react-vendor-y4dMEW91.js";import{m as q,n as z,o as B}from"./matches-BIQekJKZ.js";const w=t.createContext(null);function W(){const n=t.useContext(w);if(!n)throw new Error("useMatchDetail must be used within MatchDetailProvider");return n}function X({matchId:n,children:u}){const[i,L]=t.useState(null),[M,c]=t.useState([]),[v,f]=t.useState([]),[D,d]=t.useState(null),[b,k]=t.useState(null),[x,r]=t.useState([]),[C,E]=t.useState([]),[j,_]=t.useState(!0),[A,h]=t.useState(null),[T,y]=t.useState(!1),[P,p]=t.useState(!1),[R,G]=t.useState(!1),[H,J]=t.useState(!1),[I,K]=t.useState(!1),[F,O]=t.useState(!1),a=t.useRef(null),o=t.useCallback(async()=>{if(n){_(!0),h(null);try{const e=await q(n);e.match&&L(e.match),c(e.stats||[]);const l=e.incidents||[];if(f(l.map(s=>({...s,incident_type:s.incident_type||S(s.type),team:s.team||(s.position===1?"home":"away")}))),e.lineup?d({home:e.lineup.home||[],away:e.lineup.away||[],home_formation:e.lineup.home_formation||null,away_formation:e.lineup.away_formation||null,home_subs:e.lineup.home_subs||[],away_subs:e.lineup.away_subs||[]}):d(null),k(e.h2h||null),e.trend){const s=e.trend;!Array.isArray(s)&&(s.first_half||s.second_half)?r([s]):r(Array.isArray(s)?s:[s])}else r([]);E(e.standings||[])}catch(e){h(e.message||"Maç bilgileri yüklenemedi")}finally{_(!1)}}},[n]),m=t.useCallback(async()=>{if(n){y(!0);try{const e=await z(n);c(e?.stats||e?.fullTime?.stats||[])}catch{}finally{y(!1)}}},[n]),g=t.useCallback(async()=>{if(n){p(!0);try{const l=(await B(n))?.incidents||[];f(l.map(s=>({...s,incident_type:s.incident_type||S(s.type),team:s.team||(s.position===1?"home":"away")})))}catch{}finally{p(!1)}}},[n]);t.useEffect(()=>{o()},[o]),t.useEffect(()=>(a.current&&(clearInterval(a.current),a.current=null),i&&[2,3,4,5,7].includes(i.status_id)&&(a.current=setInterval(()=>{m(),g()},6e4)),()=>{a.current&&(clearInterval(a.current),a.current=null)}),[i?.status_id]);const N={matchId:n,match:i,stats:M,incidents:v,lineup:D,h2h:b,trend:x,standings:C,loading:j,error:A,statsLoading:T,incidentsLoading:P,lineupLoading:R,h2hLoading:H,trendLoading:I,standingsLoading:F,refreshData:o,refreshStats:m,refreshIncidents:g};return $.jsx(w.Provider,{value:N,children:u})}function S(n){return{1:"goal",2:"corner",3:"yellow_card",4:"red_card",5:"offside",6:"free_kick",7:"goal_kick",8:"penalty_goal",9:"substitution",10:"match_start",11:"second_half_start",12:"match_end",13:"halftime_score",15:"second_yellow",16:"penalty_miss",17:"own_goal",19:"injury_time",28:"var",29:"penalty_shootout",30:"penalty_shootout_miss",34:"shot_on_post"}[n]||`unknown_${n}`}export{X as M,W as u};
