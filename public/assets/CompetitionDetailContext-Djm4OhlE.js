import{j as L}from"./react-window-Bo6ozukI.js";import{r as s}from"./react-vendor-y4dMEW91.js";import{d as y,e as E,f as v}from"./matches-BIQekJKZ.js";const o=s.createContext(null);function b(){const t=s.useContext(o);if(!t)throw new Error("useCompetitionDetail must be used within CompetitionDetailProvider");return t}function j({competitionId:t,children:l}){const[c,g]=s.useState(null),[f,m]=s.useState([]),[a,x]=s.useState([]),[d,n]=s.useState(!0),[h,u]=s.useState(null),r=s.useCallback(async()=>{if(t){n(!0),u(null);try{const[e,i,S]=await Promise.all([y(t),E(t).catch(()=>({standings:[]})),v(t,{limit:100}).catch(()=>({fixtures:[]}))]);g(e.league),m(i.standings||[]),x(S.fixtures||[])}catch(e){u(e.message||"Lig bilgileri yuklenemedi")}finally{n(!1)}}},[t]);s.useEffect(()=>{r()},[r]);const C=a.filter(e=>e.status_id!==8).sort((e,i)=>e.match_time-i.match_time),D=a.filter(e=>e.status_id===8),p={competitionId:t,league:c,standings:f,fixtures:a,upcomingMatches:C,pastMatches:D,loading:d,error:h,refreshData:r};return L.jsx(o.Provider,{value:p,children:l})}export{j as C,b as u};
