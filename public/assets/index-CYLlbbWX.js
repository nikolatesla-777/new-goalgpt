import{a as zt,A as $t}from"./index-BLvmiDHl.js";import{j as e}from"./react-window-Bo6ozukI.js";import{r as i,b as Be,e as ke,j as Ae}from"./react-vendor-y4dMEW91.js";import{R as Le,L as Me,X as Ie,Y as Re,T as ze,a as se}from"./charts-Bdz40p3W.js";import{c as $e,e as xe,s as Ee,d as me,b as pe,a as We,h as De,i as Pe}from"./icons-CV9zIUvA.js";import{u as _e}from"./useSocket-7DO89etj.js";const ue="/api";function _t(){const[t,o]=i.useState(null),[g,u]=i.useState([]),[f,y]=i.useState(!0),[h,s]=i.useState(null);i.useEffect(()=>{r();const m=setInterval(r,3e4);return()=>clearInterval(m)},[]);const r=async()=>{try{const[m,S]=await Promise.all([fetch(`${ue}/api/predictions/stats`),fetch(`${ue}/api/predictions/pending?limit=10`)]);if(m.ok){const c=await m.json();o(c.stats)}if(S.ok){const c=await S.json();u(c.predictions||[])}s(null)}catch(m){s("Veriler yÃ¼klenirken hata oluÅŸtu"),console.error("Dashboard fetch error:",m)}finally{y(!1)}},N=m=>new Date(m).toLocaleString("tr-TR",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:"AI Predictions Dashboard"}),e.jsx("p",{className:"admin-header-subtitle",children:"Yapay zeka tahminlerinin genel durumu"})]}),e.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:r,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"})]}),"Yenile"]})]}),e.jsx("div",{className:"admin-content",children:f?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"64px"},children:e.jsx("div",{className:"admin-spinner"})}):h?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),e.jsx("h3",{children:h}),e.jsx("p",{children:"LÃ¼tfen daha sonra tekrar deneyin"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-stats-grid",children:[e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon teal",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"admin-stat-value",children:t?.predictions.total||0}),e.jsx("div",{className:"admin-stat-label",children:"Toplam Tahmin"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon amber",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"admin-stat-value",children:t?.predictions.pending||0}),e.jsx("div",{className:"admin-stat-label",children:"Bekleyen"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon green",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})}),e.jsx("div",{className:"admin-stat-value",children:t?.predictions.matched||0}),e.jsx("div",{className:"admin-stat-label",children:"EÅŸleÅŸen"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsxs("div",{className:"admin-stat-card-header",children:[e.jsx("div",{className:"admin-stat-icon green",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsx("span",{className:"admin-stat-change positive",children:t?.predictions.win_rate||"N/A"})]}),e.jsx("div",{className:"admin-stat-value",children:t?.predictions.winners||0}),e.jsx("div",{className:"admin-stat-label",children:"Kazanan"})]})]}),e.jsxs("div",{className:"admin-stats-grid",style:{marginBottom:"32px"},children:[e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon teal",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})}),e.jsx("div",{className:"admin-stat-value",children:t?.requests.total||0}),e.jsx("div",{className:"admin-stat-label",children:"Toplam Ä°stek"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsxs("div",{className:"admin-stat-card-header",children:[e.jsx("div",{className:"admin-stat-icon green",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})}),e.jsx("span",{className:"admin-stat-change positive",children:t?.requests.success_rate||"N/A"})]}),e.jsx("div",{className:"admin-stat-value",children:t?.requests.successful||0}),e.jsx("div",{className:"admin-stat-label",children:"BaÅŸarÄ±lÄ±"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon red",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("div",{className:"admin-stat-value",children:t?.requests.failed||0}),e.jsx("div",{className:"admin-stat-label",children:"BaÅŸarÄ±sÄ±z"})]})]}),e.jsxs("div",{className:"admin-table-container",children:[e.jsx("div",{className:"admin-table-header",children:e.jsx("h3",{className:"admin-table-title",children:"Son Gelen Tahminler"})}),g.length===0?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),e.jsx("h3",{children:"HenÃ¼z tahmin yok"}),e.jsx("p",{children:"DÄ±ÅŸ yapay zekadan tahmin bekleniyor"})]}):e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Bot"}),e.jsx("th",{children:"MaÃ§"}),e.jsx("th",{children:"Skor"}),e.jsx("th",{children:"Dakika"}),e.jsx("th",{children:"Tahmin"}),e.jsx("th",{children:"Zaman"}),e.jsx("th",{children:"Durum"})]})}),e.jsx("tbody",{children:g.map(m=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("span",{className:"admin-badge neutral",children:m.bot_name})}),e.jsxs("td",{style:{fontWeight:500},children:[m.home_team_name," - ",m.away_team_name]}),e.jsx("td",{children:m.score_at_prediction}),e.jsxs("td",{children:[m.minute_at_prediction,"'"]}),e.jsx("td",{children:e.jsxs("span",{style:{color:"var(--admin-accent)",fontWeight:500},children:[m.prediction_type," ",m.prediction_value]})}),e.jsx("td",{style:{color:"var(--admin-text-secondary)"},children:N(m.created_at)}),e.jsx("td",{children:e.jsx("span",{className:`admin-badge ${m.processed?"success":"warning"}`,children:m.processed?"Ä°ÅŸlendi":"Bekliyor"})})]},m.id))})]})]})]})})]})}const Oe=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Ve=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Fe=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Ke=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),He=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),e.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),e.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),Ye=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),Ge=[{id:"1",type:"success",title:"Ã–deme BaÅŸarÄ±lÄ±",message:"Ahmet YÄ±lmaz premium Ã¼yelik satÄ±n aldÄ±.",time:"2 dakika Ã¶nce",isRead:!1},{id:"2",type:"warning",title:"YÃ¼ksek Kaynak KullanÄ±mÄ±",message:"Sunucu CPU kullanÄ±mÄ± %85 seviyesine ulaÅŸtÄ±.",time:"15 dakika Ã¶nce",isRead:!1},{id:"3",type:"error",title:"API HatasÄ±",message:"Live score API baÄŸlantÄ±sÄ±nda kopma yaÅŸandÄ±.",time:"45 dakika Ã¶nce",isRead:!0},{id:"4",type:"info",title:"GÃ¼nlÃ¼k Rapor HazÄ±r",message:"DÃ¼nkÃ¼ iÅŸlemlerin raporu oluÅŸturuldu.",time:"2 saat Ã¶nce",isRead:!0},{id:"5",type:"success",title:"Yeni KullanÄ±cÄ±",message:"Mehmet Demir sisteme kayÄ±t oldu.",time:"3 saat Ã¶nce",isRead:!0}];function ge({isOpen:t,onClose:o}){const[g,u]=i.useState("all"),[f,y]=i.useState(Ge),h=i.useRef(null);i.useEffect(()=>{function c(j){h.current&&!h.current.contains(j.target)&&o()}return t&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[t,o]);const s=g==="all"?f:f.filter(c=>!c.isRead),r=f.filter(c=>!c.isRead).length,N=()=>{y(f.map(c=>({...c,isRead:!0})))},m=c=>{y(f.map(j=>j.id===c?{...j,isRead:!0}:j))},S=c=>{switch(c){case"success":return e.jsx(Ke,{});case"warning":return e.jsx(He,{});case"error":return e.jsx(Ye,{});default:return e.jsx(Fe,{})}};return Be.createPortal(e.jsxs(e.Fragment,{children:[t&&e.jsx("div",{className:"admin-notifications-overlay"}),e.jsxs("div",{ref:h,className:`admin-notifications-panel ${t?"open":""}`,children:[e.jsxs("div",{className:"notifications-header",children:[e.jsxs("div",{className:"notifications-title-row",children:[e.jsx("h3",{children:"Bildirimler"}),e.jsx("button",{className:"close-btn",onClick:o,children:e.jsx(Oe,{})})]}),e.jsxs("div",{className:"notifications-tabs",children:[e.jsx("button",{className:`tab-btn ${g==="all"?"active":""}`,onClick:()=>u("all"),children:"TÃ¼mÃ¼"}),e.jsxs("button",{className:`tab-btn ${g==="unread"?"active":""}`,onClick:()=>u("unread"),children:["OkunmamÄ±ÅŸ",r>0&&e.jsx("span",{className:"count-badge",children:r})]})]}),r>0&&e.jsxs("button",{className:"mark-read-btn",onClick:N,children:[e.jsx(Ve,{})," TÃ¼mÃ¼nÃ¼ Okundu Ä°ÅŸaretle"]})]}),e.jsx("div",{className:"notifications-list",children:s.length===0?e.jsxs("div",{className:"empty-notifications",children:[e.jsx("div",{className:"empty-icon",children:"ðŸ””"}),e.jsx("p",{children:"Bildirim bulunmuyor"}),e.jsx("span",{children:g==="unread"?"OkunmamÄ±ÅŸ bildiriminiz yok.":"HenÃ¼z hiÃ§ bildirim almadÄ±nÄ±z."})]}):s.map(c=>e.jsxs("div",{className:`notification-item ${c.isRead?"":"unread"} ${c.type}`,onClick:()=>m(c.id),children:[e.jsx("div",{className:"notification-icon",children:S(c.type)}),e.jsxs("div",{className:"notification-content",children:[e.jsx("h4",{className:"notification-title",children:c.title}),e.jsx("p",{className:"notification-message",children:c.message}),e.jsx("span",{className:"notification-time",children:c.time})]}),!c.isRead&&e.jsx("div",{className:"unread-dot"})]},c.id))})]})]}),document.body)}const ae="/api",je={today:"BugÃ¼n",week:"Bu Hafta",month:"Bu Ay",year:"Bu YÄ±l"},G={revenue:{label:"TOPLAM GELÄ°R",trendTitle:"Toplam Gelir Trendi",tableTitle:"Gelir DetaylarÄ±",tableDesc:"SeÃ§ili dÃ¶nemde gerÃ§ekleÅŸen tÃ¼m satÄ±n alma iÅŸlemleri"},subscribers:{label:"AKTÄ°F ABONELER",trendTitle:"Aktif Aboneler Trendi",tableTitle:"Aktif Aboneler",tableDesc:"Åžu an aktif aboneliÄŸi olan kullanÄ±cÄ±lar"},sales:{label:"SATIÅž ADEDÄ°",trendTitle:"SatÄ±ÅŸ Adedi Trendi",tableTitle:"SatÄ±ÅŸ DetaylarÄ±",tableDesc:"SeÃ§ili dÃ¶nemde gerÃ§ekleÅŸen satÄ±ÅŸlar"},"billing-errors":{label:"FATURA HATASI",trendTitle:"Fatura HatasÄ± Trendi",tableTitle:"FaturalandÄ±rma HatalarÄ±",tableDesc:"Ã–deme alÄ±namayan kullanÄ±cÄ±lar"},signups:{label:"YENÄ° KAYIT",trendTitle:"Yeni KayÄ±t Trendi",tableTitle:"Yeni KayÄ±tlar",tableDesc:"Son dÃ¶nemde kayÄ±t olan kullanÄ±cÄ±lar"},trials:{label:"DENEME",trendTitle:"Deneme Trendi",tableTitle:"Deneme BaÅŸlatanlar",tableDesc:"Ãœcretsiz deneme dÃ¶nemindeki kullanÄ±cÄ±lar"},cancellations:{label:"Ä°PTALLER",trendTitle:"Ä°ptaller Trendi",tableTitle:"GÃ¶nÃ¼llÃ¼ Ä°ptaller",tableDesc:"AboneliÄŸini iptal eden kullanÄ±cÄ±lar"},churn:{label:"CHURN",trendTitle:"Churn Trendi",tableTitle:"SÃ¼resi Bitenler",tableDesc:"AboneliÄŸi sona eren kullanÄ±cÄ±lar"},"first-purchase":{label:"Ä°LK SATIÅž",trendTitle:"Ä°lk SatÄ±ÅŸ Trendi",tableTitle:"Ä°lk SatÄ±ÅŸlar",tableDesc:"Ä°lk kez satÄ±n alan kullanÄ±cÄ±lar"},conversion:{label:"DÃ–NÃœÅžÃœM",trendTitle:"DÃ¶nÃ¼ÅŸÃ¼m OranÄ± Trendi",tableTitle:"DÃ¶nÃ¼ÅŸÃ¼m DetaylarÄ±",tableDesc:"KayÄ±t olup satÄ±n alan kullanÄ±cÄ±lar"},"total-members":{label:"TOPLAM ÃœYE",trendTitle:"Toplam Ãœye Trendi",tableTitle:"TÃ¼m Ãœyeler",tableDesc:"Sistemdeki tÃ¼m kayÄ±tlÄ± kullanÄ±cÄ±lar"}},qe=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})}),fe=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"})}),ye=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4zM3 6h18M16 10a4 4 0 0 1-8 0"})}),Ue=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4M12 17h.01"})}),Je=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM20 8v6M23 11h-6"})}),Ze=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 6v6l4 2"})]}),Xe=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M15 9l-6 6M9 9l6 6"})]}),ve=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M23 18l-9.5-9.5-5 5L1 6M17 18h6v-6"})}),Qe=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),et=()=>e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})});function ne(t){return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)}function E(t){return new Intl.NumberFormat("tr-TR").format(t)}function Z(t){if(!t)return"-";const o=new Date(t);return`${o.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"2-digit"})} - ${o.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})}`}function tt({platform:t}){const o=t?.toLowerCase()==="ios",g=t?.toLowerCase()==="android"||t?.toLowerCase()==="google";return e.jsx("span",{className:`platform-badge ${o?"ios":g?"android":"web"}`,children:o?"ðŸŽ iOS":g?"ðŸ¤– Android":"ðŸŒ Web"})}function st({planName:t}){if(!t)return null;const o=t.toLowerCase().includes("hafta")||t.toLowerCase().includes("week"),g=t.toLowerCase().includes("ay")||t.toLowerCase().includes("month"),u=t.toLowerCase().includes("yÄ±l")||t.toLowerCase().includes("year");return e.jsx("span",{className:`plan-badge ${o?"weekly":g?"monthly":u?"yearly":""}`,children:o?"HaftalÄ±k":g?"AylÄ±k":u?"YÄ±llÄ±k":t})}function X({type:t,icon:o,iconColor:g,label:u,value:f,change:y,iosValue:h,androidValue:s,isSelected:r,onClick:N}){const m=y!==void 0&&y>=0;return e.jsxs("div",{className:`admin-stat-card ${r?"selected":""} clickable`,onClick:N,children:[e.jsxs("div",{className:"admin-stat-card-header",children:[e.jsx("div",{className:`admin-stat-icon ${g}`,children:o}),y!==void 0&&e.jsxs("span",{className:`admin-stat-change ${m?"positive":"negative"}`,children:[m?"â†‘":"â†“"," ",Math.abs(y),"%"]})]}),e.jsx("div",{className:"admin-stat-label",children:u}),e.jsx("div",{className:"admin-stat-value",children:f}),(h!==void 0||s!==void 0)&&e.jsxs("div",{className:"admin-stat-breakdown",children:[e.jsxs("span",{className:"ios-value",children:["ðŸŽ ",E(h||0)]}),e.jsxs("span",{className:"android-value",children:["ðŸ¤– ",E(s||0)]})]})]})}function at({data:t,title:o}){return e.jsxs("div",{className:"dashboard-chart-container",children:[e.jsx("h3",{className:"dashboard-chart-title",children:o}),e.jsxs("div",{className:"dashboard-chart-legend",children:[e.jsx("span",{className:"legend-item total",children:"â€” Toplam"}),e.jsx("span",{className:"legend-item ios",children:"â€” iOS"}),e.jsx("span",{className:"legend-item android",children:"â€” Android"})]}),e.jsx(Le,{width:"100%",height:300,children:e.jsxs(Me,{data:t,margin:{top:5,right:20,left:10,bottom:5},children:[e.jsx(Ie,{dataKey:"date",tickFormatter:g=>{const u=new Date(g);return`${u.getDate()} ${["Oca","Åžub","Mar","Nis","May","Haz","Tem","AÄŸu","Eyl","Eki","Kas","Ara"][u.getMonth()]}`},tick:{fontSize:12}}),e.jsx(Re,{tick:{fontSize:12}}),e.jsx(ze,{labelFormatter:g=>new Date(g).toLocaleDateString("tr-TR"),formatter:g=>E(g)}),e.jsx(se,{type:"monotone",dataKey:"total",stroke:"#9CA3AF",strokeWidth:2,strokeDasharray:"5 5",dot:!1}),e.jsx(se,{type:"monotone",dataKey:"ios",stroke:"#3B82F6",strokeWidth:2,dot:!1}),e.jsx(se,{type:"monotone",dataKey:"android",stroke:"#10B981",strokeWidth:2,dot:!1})]})})]})}function nt({data:t,type:o,tableTitle:g,tableDesc:u}){const f=h=>{if(!h)return;const s=h.replace(/\D/g,"");window.open(`https://wa.me/${s}`,"_blank")},y=()=>{alert("Excel export Ã¶zelliÄŸi yakÄ±nda eklenecek")};return e.jsxs("div",{className:"dashboard-table-container",children:[e.jsxs("div",{className:"dashboard-table-header",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"dashboard-table-title",children:g}),e.jsx("p",{className:"dashboard-table-desc",children:u})]}),e.jsxs("div",{className:"dashboard-table-actions",children:[e.jsx("button",{className:"excel-export-btn",onClick:y,children:"ðŸ“¥ Excel Ä°ndir"}),e.jsxs("span",{className:"record-count",children:[t.length," kayÄ±t"]})]})]}),e.jsx("div",{className:"dashboard-table-scroll",children:e.jsxs("table",{className:"dashboard-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"KULLANICI"}),o==="signups"&&e.jsx("th",{children:"TELEFON"}),e.jsx("th",{children:"PLATFORM"}),["revenue","subscribers","sales","trials"].includes(o)&&e.jsx("th",{children:"PAKET"}),["revenue","sales"].includes(o)&&e.jsx("th",{children:"TUTAR"}),["revenue","sales"].includes(o)&&e.jsx("th",{children:"Ä°ÅžLEM ADETÄ°"}),["subscribers","trials"].includes(o)&&e.jsx("th",{children:"KALAN GÃœN"}),o==="subscribers"&&e.jsx("th",{children:"TOPLAM HARCAMA"}),o==="signups"&&e.jsx("th",{children:"KAYIT TARÄ°HÄ°"}),o==="trials"&&e.jsx("th",{children:"BAÅžLANGIÃ‡"}),o==="cancellations"&&e.jsx("th",{children:"Ä°PTAL TARÄ°HÄ°"}),o==="cancellations"&&e.jsx("th",{children:"BÄ°TÄ°ÅžE KALAN GÃœN"}),["churn","billing-errors"].includes(o)&&e.jsx("th",{children:"SON GÄ°RÄ°Åž"}),e.jsx("th",{children:"Ä°ÅžLEMLER"})]})}),e.jsxs("tbody",{children:[t.map((h,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:s+1}),e.jsx("td",{children:e.jsxs("div",{className:"user-cell",children:[e.jsx("div",{className:"user-avatar",children:(h.full_name||h.email||"?")[0].toUpperCase()}),e.jsxs("div",{className:"user-info",children:[e.jsx("span",{className:"user-name",children:h.full_name||"Ä°simsiz"}),e.jsx("span",{className:"user-email",children:h.email||"-"})]})]})}),o==="signups"&&e.jsx("td",{children:h.phone?e.jsxs("button",{className:"whatsapp-btn",onClick:()=>f(h.phone),children:[e.jsx(Qe,{})," ",h.phone]}):"-"}),e.jsx("td",{children:e.jsx(tt,{platform:h.platform})}),["revenue","subscribers","sales","trials"].includes(o)&&e.jsx("td",{children:e.jsx(st,{planName:h.plan_name})}),["revenue","sales"].includes(o)&&e.jsx("td",{className:"amount-cell",children:ne(h.amount||0)}),["revenue","sales"].includes(o)&&e.jsx("td",{children:h.transaction_count||0}),["subscribers","trials"].includes(o)&&e.jsxs("td",{children:[h.days_remaining||0," gÃ¼n"]}),o==="subscribers"&&e.jsx("td",{className:"amount-cell",children:ne(h.total_spent||0)}),o==="signups"&&e.jsx("td",{children:Z(h.created_at||"")}),o==="trials"&&e.jsx("td",{children:Z(h.started_at||"")}),o==="cancellations"&&e.jsx("td",{children:Z(h.canceled_at||"")}),o==="cancellations"&&e.jsxs("td",{children:[h.days_remaining||0," gÃ¼n"]}),["churn","billing-errors"].includes(o)&&e.jsx("td",{children:Z(h.expired_at||"")}),e.jsx("td",{children:e.jsx("button",{className:"action-btn",children:"â‹®"})})]},h.id)),t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"empty-cell",children:"Veri bulunamadÄ±"})})]})]})})]})}const be=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),e.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]});function St(){const[t,o]=i.useState(null),[g,u]=i.useState(!0),[f,y]=i.useState(null),[h,s]=i.useState("month"),[r,N]=i.useState(null),[m,S]=i.useState([]),[c,j]=i.useState([]),[B,I]=i.useState(!1),[l,L]=i.useState(!1);i.useEffect(()=>{async function d(){u(!0),y(null);try{const A=await(await fetch(`${ae}/admin/dashboard/stats?period=${h}`)).json();A.success?o(A.data):y(A.error||"Failed to fetch stats")}catch(w){y(w.message||"Network error")}finally{u(!1)}}d()},[h]),i.useEffect(()=>{if(!r){S([]),j([]);return}async function d(){I(!0);try{const[w,A]=await Promise.all([fetch(`${ae}/admin/dashboard/${r}/trend?period=${h}`),fetch(`${ae}/admin/dashboard/${r}/details?period=${h}&limit=100`)]),$=await w.json(),W=await A.json();$.success&&S($.data),W.success&&j(W.data)}catch(w){console.error("Error fetching drilldown data:",w)}finally{I(!1)}}d()},[r,h]);const R=d=>{N(d)},D=()=>{N(null)},M=[{type:"revenue",icon:e.jsx(qe,{}),iconColor:"teal",getValue:()=>ne(t?.financial.totalRevenue||0),getChange:()=>t?.financial.revenueChange,getIosValue:()=>t?.financial.revenueIos||0,getAndroidValue:()=>t?.financial.revenueAndroid||0},{type:"subscribers",icon:e.jsx(fe,{}),iconColor:"green",getValue:()=>E(t?.financial.activeSubscribers||0),getChange:()=>t?.financial.subscribersChange,getIosValue:()=>t?.financial.subscribersIos||0,getAndroidValue:()=>t?.financial.subscribersAndroid||0},{type:"sales",icon:e.jsx(ye,{}),iconColor:"blue",getValue:()=>E(t?.financial.salesCount||0),getChange:()=>t?.financial.salesChange,getIosValue:()=>t?.financial.salesIos||0,getAndroidValue:()=>t?.financial.salesAndroid||0},{type:"billing-errors",icon:e.jsx(Ue,{}),iconColor:"red",getValue:()=>E(t?.financial.billingErrors||0),getChange:()=>t?.financial.errorsChange,getIosValue:()=>t?.financial.errorsIos||0,getAndroidValue:()=>t?.financial.errorsAndroid||0},{type:"signups",icon:e.jsx(Je,{}),iconColor:"teal",getValue:()=>E(t?.acquisition.newSignups||0),getChange:()=>t?.acquisition.signupsChange,getIosValue:()=>t?.acquisition.signupsIos||0,getAndroidValue:()=>t?.acquisition.signupsAndroid||0},{type:"trials",icon:e.jsx(Ze,{}),iconColor:"purple",getValue:()=>E(t?.acquisition.trials||0),getChange:()=>t?.acquisition.trialsChange,getIosValue:()=>t?.acquisition.trialsIos||0,getAndroidValue:()=>t?.acquisition.trialsAndroid||0},{type:"first-purchase",icon:e.jsx(ye,{}),iconColor:"green",getValue:()=>E(t?.acquisition.firstPurchase||0),getChange:()=>t?.acquisition.firstPurchaseChange,getIosValue:()=>t?.acquisition.firstPurchaseIos||0,getAndroidValue:()=>t?.acquisition.firstPurchaseAndroid||0},{type:"conversion",icon:e.jsx(ve,{}),iconColor:"blue",getValue:()=>`${t?.acquisition.conversionRate||0}%`,getChange:()=>t?.acquisition.conversionChange,getIosValue:()=>t?.acquisition.conversionIos||0,getAndroidValue:()=>t?.acquisition.conversionAndroid||0},{type:"cancellations",icon:e.jsx(Xe,{}),iconColor:"amber",getValue:()=>E(t?.retention.cancellations||0),getChange:()=>t?.retention.cancellationsChange,getIosValue:()=>t?.retention.cancellationsIos||0,getAndroidValue:()=>t?.retention.cancellationsAndroid||0},{type:"churn",icon:e.jsx(ve,{}),iconColor:"red",getValue:()=>E(t?.retention.churnRate||0),getChange:()=>t?.retention.churnChange},{type:"total-members",icon:e.jsx(fe,{}),iconColor:"teal",getValue:()=>E(t?.retention.totalMembers||0),getChange:()=>t?.retention.membersChange,getIosValue:()=>t?.retention.membersIos||0,getAndroidValue:()=>t?.retention.membersAndroid||0}],n=M.slice(0,4),p=M.slice(4,8),b=M.slice(8,11);if(r){const d=G[r];return e.jsxs(e.Fragment,{children:[e.jsx(ge,{isOpen:l,onClose:()=>L(!1)}),e.jsxs("header",{className:"admin-header",children:[e.jsx("div",{className:"admin-header-left",children:e.jsxs("button",{className:"back-button",onClick:D,children:[e.jsx(et,{})," Panele DÃ¶n"]})}),e.jsxs("div",{className:"admin-header-actions",children:[e.jsxs("button",{className:"notification-btn",onClick:()=>L(!0),"aria-label":"Bildirimler",children:[e.jsx(be,{}),e.jsx("span",{className:"notification-badge",children:"3"})]}),e.jsx("div",{className:"admin-period-selector",children:e.jsx("select",{value:h,onChange:w=>s(w.target.value),className:"admin-select",children:Object.entries(je).map(([w,A])=>e.jsx("option",{value:w,children:A},w))})})]})]}),e.jsx("div",{className:"admin-cards-scroll-container",children:e.jsx("div",{className:"admin-cards-scroll",children:M.map(w=>e.jsx(X,{type:w.type,icon:w.icon,iconColor:w.iconColor,label:G[w.type]?.label||"",value:w.getValue(),change:w.getChange(),iosValue:w.getIosValue?.(),androidValue:w.getAndroidValue?.(),isSelected:w.type===r,onClick:()=>R(w.type)},w.type))})}),e.jsx("div",{className:"admin-content",children:B?e.jsxs("div",{className:"admin-loading",children:[e.jsx("div",{className:"admin-spinner"}),e.jsx("span",{children:"Veriler yÃ¼kleniyor..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{data:m,title:d.trendTitle}),e.jsx(nt,{data:c,type:r,tableTitle:d.tableTitle,tableDesc:d.tableDesc})]})})]})}return e.jsxs(e.Fragment,{children:[e.jsx(ge,{isOpen:l,onClose:()=>L(!1)}),e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:"Komuta Merkezi ðŸš€"}),e.jsx("p",{className:"admin-header-subtitle",children:"TÃ¼m uygulamanÄ±n anlÄ±k verileri ve finansal durumu"})]}),e.jsxs("div",{className:"admin-header-actions",children:[e.jsxs("button",{className:"notification-btn",onClick:()=>L(!0),"aria-label":"Bildirimler",children:[e.jsx(be,{}),e.jsx("span",{className:"notification-badge",children:"3"})]}),e.jsx("div",{className:"admin-period-selector",children:e.jsx("select",{value:h,onChange:d=>s(d.target.value),className:"admin-select",children:Object.entries(je).map(([d,w])=>e.jsx("option",{value:d,children:w},d))})})]})]}),e.jsxs("div",{className:"admin-content",children:[g&&e.jsxs("div",{className:"admin-loading",children:[e.jsx("div",{className:"admin-spinner"}),e.jsx("span",{children:"Veriler yÃ¼kleniyor..."})]}),f&&e.jsxs("div",{className:"admin-error-message",children:[e.jsxs("p",{children:["âŒ ",f]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"admin-btn admin-btn-primary",children:"Tekrar Dene"})]}),t&&!g&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"admin-section",children:[e.jsxs("h2",{className:"admin-section-title",children:[e.jsx("span",{className:"admin-section-dot green"}),"Finansal SaÄŸlÄ±k"]}),e.jsx("div",{className:"admin-stats-grid",children:n.map(d=>e.jsx(X,{type:d.type,icon:d.icon,iconColor:d.iconColor,label:G[d.type]?.label||"",value:d.getValue(),change:d.getChange(),iosValue:d.getIosValue?.(),androidValue:d.getAndroidValue?.(),onClick:()=>R(d.type)},d.type))})]}),e.jsxs("div",{className:"admin-section",children:[e.jsxs("h2",{className:"admin-section-title",children:[e.jsx("span",{className:"admin-section-dot blue"}),"Edinim & BÃ¼yÃ¼me"]}),e.jsx("div",{className:"admin-stats-grid",children:p.map(d=>e.jsx(X,{type:d.type,icon:d.icon,iconColor:d.iconColor,label:G[d.type]?.label||"",value:d.getValue(),change:d.getChange(),iosValue:d.getIosValue?.(),androidValue:d.getAndroidValue?.(),onClick:()=>R(d.type)},d.type))})]}),e.jsxs("div",{className:"admin-section",children:[e.jsxs("h2",{className:"admin-section-title",children:[e.jsx("span",{className:"admin-section-dot amber"}),"Tutundurma & KayÄ±p"]}),e.jsx("div",{className:"admin-stats-grid",children:b.map(d=>e.jsx(X,{type:d.type,icon:d.icon,iconColor:d.iconColor,label:G[d.type]?.label||"",value:d.getValue(),change:d.getChange(),iosValue:d.getIosValue?.(),androidValue:d.getAndroidValue?.(),onClick:()=>R(d.type)},d.type))})]})]})]})]})}const we="/api";function Ct(){const t=ke(),[o,g]=i.useState([]),[u,f]=i.useState(null),[y,h]=i.useState([]),[s,r]=i.useState(!0),[N,m]=i.useState("all"),[S,c]=i.useState(""),j=i.useRef(null),B=i.useCallback(async()=>{r(!0);try{const n=new URLSearchParams;N!=="all"&&n.set("status",N),n.set("limit","100");const p=await fetch(`${we}/predictions/unified?${n.toString()}`);if(p.ok){const b=await p.json();b.success&&b.data&&(g(b.data.predictions||[]),f(b.data.stats||null),h(b.data.bots||[]))}}catch(n){console.error("Fetch predictions error:",n)}finally{r(!1)}},[N]);i.useEffect(()=>{B()},[B]),i.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const I=o.filter(n=>{if(!S)return!0;const p=S.toLowerCase();return n.home_team_name?.toLowerCase().includes(p)||n.away_team_name?.toLowerCase().includes(p)||n.canonical_bot_name?.toLowerCase().includes(p)||n.league_name?.toLowerCase().includes(p)});_e({onMinuteUpdate:n=>{g(p=>p.map(b=>b.match_id===n.matchId?{...b,live_match_minute:n.minute}:b))},onScoreChange:n=>{g(p=>p.map(b=>b.match_id===n.matchId?{...b,home_score_display:n.homeScore,away_score_display:n.awayScore}:b)),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{B()},2e3)},onMatchStateChange:n=>{g(p=>p.map(b=>b.match_id===n.matchId?{...b,live_match_status:n.statusId}:b)),j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{B()},2e3)},onPredictionSettled:n=>{if(g(p=>p.map(b=>b.id===n.predictionId?{...b,result:n.result,result_reason:n.resultReason,final_score:n.finalScore||b.final_score,resulted_at:new Date().toISOString()}:b)),u){const p=n.result==="won",b=n.result==="lost";f(d=>{if(!d)return d;const w=d.won+(p?1:0),A=d.lost+(b?1:0),$=Math.max(0,d.pending-1),W=w+A,F=W>0?(w/W*100).toFixed(1)+"%":"N/A";return{...d,pending:$,won:w,lost:A,winRate:F}})}}});const l=async(n,p)=>{const b=p==="VIP"?"FREE":"VIP";try{(await fetch(`${we}/predictions/${n}/access`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_type:b})})).ok&&g(w=>w.map(A=>A.id===n?{...A,access_type:b}:A))}catch(d){console.error("Toggle access error:",d)}},L=n=>{const p=y.find(b=>b.name===n||b.displayName===n);return p?p.winRate:null},R=n=>new Date(n).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),D=n=>{const p=n.live_match_status||0,b=n.live_match_minute??0,d=n.home_score_display??0,w=n.away_score_display??0,A=n.ht_home_score??0,$=n.ht_away_score??0;return p>=8?{type:"finished",status:"MS",score:`${d}-${w}`,htScore:A>0||$>0?`(${A}-${$})`:null}:p===3?{type:"halftime",status:"DY",score:`${d}-${w}`,htScore:null}:p>=2&&p<8?{type:"live",status:`${b}'`,score:`${d}-${w}`,htScore:p>=4&&(A>0||$>0)?`(${A}-${$})`:null}:p===1?{type:"notstarted",status:"-",score:"-",htScore:null}:{type:"unknown",status:"-",score:"-",htScore:null}},M=[{key:"all",label:"TÃ¼mÃ¼",count:u?.total},{key:"pending",label:"Bekleyen",count:u?.pending},{key:"won",label:"Kazanan",count:u?.won},{key:"lost",label:"Kaybeden",count:u?.lost}];return e.jsx("div",{className:"min-h-screen bg-[#090909] text-white p-8",children:e.jsxs("div",{className:"max-w-[1800px] mx-auto",children:[e.jsxs("header",{className:"flex items-center justify-between mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"AI Tahminleri"}),e.jsx("p",{className:"text-gray-400",children:"TÃ¼m bot tahminleri ve performans takibi"})]}),e.jsxs("button",{onClick:B,className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl text-white font-medium hover:shadow-lg hover:shadow-blue-500/20 transition-all flex items-center gap-2",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"})]}),"Yenile"]})]}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-12",children:[e.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 relative overflow-hidden group hover:border-blue-500/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx($e,{size:64,weight:"duotone",className:"text-blue-500"})}),e.jsx("div",{className:"text-gray-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Toplam"}),e.jsx("div",{className:"text-3xl font-black text-white",children:u.total})]}),e.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 relative overflow-hidden group hover:border-yellow-500/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(xe,{size:64,weight:"duotone",className:"text-yellow-500"})}),e.jsx("div",{className:"text-gray-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Bekleyen"}),e.jsx("div",{className:"text-3xl font-black text-yellow-500",children:u.pending})]}),e.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 relative overflow-hidden group hover:border-green-500/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Ee,{size:64,weight:"duotone",className:"text-green-500"})}),e.jsx("div",{className:"text-gray-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Kazanan"}),e.jsx("div",{className:"text-3xl font-black text-green-500",children:u.won})]}),e.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 relative overflow-hidden group hover:border-red-500/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(me,{size:64,weight:"duotone",className:"text-red-500"})}),e.jsx("div",{className:"text-gray-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Kaybeden"}),e.jsx("div",{className:"text-3xl font-black text-red-500",children:u.lost})]}),e.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 relative overflow-hidden group hover:border-purple-500/20 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(pe,{size:64,weight:"duotone",className:"text-purple-500"})}),e.jsx("div",{className:"text-gray-400 text-sm font-medium mb-1 uppercase tracking-wider",children:"Basari"}),e.jsx("div",{className:"text-3xl font-black text-purple-500",children:u.winRate})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6 gap-4 flex-wrap",children:[e.jsx("div",{className:"flex gap-2",children:M.map(n=>e.jsxs("button",{onClick:()=>m(n.key),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2 ${N===n.key?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white border border-white/10"}`,children:[n.label,n.count!==void 0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${N===n.key?"bg-white/20":"bg-white/10"}`,children:n.count})]},n.key))}),e.jsxs("div",{className:"flex items-center gap-3 bg-[#151515] border border-white/10 rounded-xl px-4 py-2.5 min-w-[300px]",children:[e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-gray-500",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("path",{d:"M21 21l-4.35-4.35"})]}),e.jsx("input",{type:"text",placeholder:"TakÄ±m, bot veya lig ara...",value:S,onChange:n=>c(n.target.value),className:"bg-transparent border-none outline-none text-white text-sm flex-1 placeholder:text-gray-500"})]})]}),e.jsx("div",{className:"bg-[#111] border border-white/5 rounded-2xl overflow-hidden",children:s?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-white/10 border-t-blue-500 rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-400",children:"Tahminler yukleniyor..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx(We,{size:64,weight:"duotone",className:"text-gray-600"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Tahmin Bulunamadi"}),e.jsx("p",{className:"text-gray-500",children:"Bu filtreye uygun tahmin yok"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-black/40",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Ulke"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Lig"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Bot"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider min-w-[220px]",children:"Takimlar"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Paylasim Ani"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Tahmin"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Canli Skor"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Sonuc"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Erisim"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Saat"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Eslesme"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:I.map(n=>{const p=D(n),b=L(n.canonical_bot_name);return e.jsxs("tr",{className:`hover:bg-white/[0.02] transition-colors ${n.result==="won"?"bg-green-500/[0.03]":n.result==="lost"?"bg-red-500/[0.03]":""} ${n.match_id?"cursor-pointer":""}`,onClick:()=>n.match_id&&t(`/match/${n.match_id}`),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.country_logo?e.jsx("img",{src:n.country_logo,alt:"",className:"w-5 h-4 object-cover rounded-sm shadow"}):e.jsx("span",{className:"text-gray-600 text-sm",children:"ðŸŒ"}),e.jsx("span",{className:"text-xs text-gray-400 truncate max-w-[80px]",children:n.country_name||"-"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.competition_logo&&e.jsx("img",{src:n.competition_logo,alt:"",className:"w-4 h-4 object-contain"}),e.jsx("span",{className:"text-sm text-gray-300 truncate max-w-[120px]",children:n.league_name||n.competition_name||"-"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:n.canonical_bot_name}),b&&e.jsx("span",{className:"text-xs text-green-500 font-medium",children:b})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0",children:[n.home_team_logo&&e.jsx("img",{src:n.home_team_logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0"}),e.jsx("span",{className:"text-sm text-white truncate",children:n.home_team_name})]}),e.jsx("span",{className:"text-xs text-gray-600 px-1",children:"vs"}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-1 min-w-0 justify-end",children:[e.jsx("span",{className:"text-sm text-white truncate",children:n.away_team_name}),n.away_team_logo&&e.jsx("img",{src:n.away_team_logo,alt:"",className:"w-5 h-5 object-contain flex-shrink-0"})]})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[n.minute_at_prediction,"'"]}),e.jsx("span",{className:"text-sm font-bold text-white font-mono",children:n.score_at_prediction||"0-0"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-block px-3 py-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg text-xs font-bold text-white whitespace-nowrap",children:n.prediction})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`text-xs font-semibold ${p.type==="live"?"text-green-500":p.type==="halftime"?"text-yellow-500":p.type==="finished"?"text-red-500":"text-gray-500"}`,children:p.status}),e.jsx("span",{className:"text-sm font-bold text-white font-mono",children:p.score}),p.htScore&&e.jsxs("span",{className:"text-[10px] text-gray-500",children:["HT: ",p.htScore]})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-bold ${n.result==="won"?"bg-green-500/20 text-green-400":n.result==="lost"?"bg-red-500/20 text-red-400":n.result==="pending"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:[n.result==="won"&&e.jsx(pe,{size:12,weight:"fill"}),n.result==="lost"&&e.jsx(me,{size:12,weight:"fill"}),n.result==="pending"&&e.jsx(xe,{size:12,weight:"fill"}),n.result==="won"?"KAZANDI":n.result==="lost"?"KAYBETTI":n.result==="pending"?"BEKLIYOR":"IPTAL"]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{onClick:d=>{d.stopPropagation(),l(n.id,n.access_type)},className:`px-3 py-1 rounded-lg text-xs font-bold transition-all hover:scale-105 ${n.access_type==="VIP"?"bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-lg shadow-amber-500/20":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:n.access_type})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:R(n.created_at)})}),e.jsx("td",{className:"px-4 py-3 text-center",children:n.match_id?e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-500",children:[e.jsx(De,{size:14,weight:"bold"}),e.jsx("span",{className:"text-xs font-semibold",children:"EVET"})]}):e.jsxs("div",{className:"flex items-center justify-center gap-1 text-red-500",children:[e.jsx(Pe,{size:14,weight:"bold"}),e.jsx("span",{className:"text-xs font-semibold",children:"HAYIR"})]})})]},n.id)})})]})})})]})})}const it="/api";function Tt(){const[t,o]=i.useState([]),[g,u]=i.useState(!0),[f,y]=i.useState("all"),[h,s]=i.useState(null);i.useEffect(()=>{r();const l=setInterval(r,15e3);return()=>clearInterval(l)},[f]);const r=async()=>{try{let l=`${it}/predictions/requests?limit=100`;f==="success"?l+="&success=true":f==="failed"&&(l+="&success=false");const L=await fetch(l);if(L.ok){const R=await L.json();o(R.requests||[])}}catch(l){console.error("Fetch logs error:",l)}finally{u(!1)}},N=l=>new Date(l).toLocaleString("tr-TR",{hour:"2-digit",minute:"2-digit",second:"2-digit",day:"2-digit",month:"2-digit"}),m=(l,L)=>L?e.jsx("span",{className:"admin-badge success",children:l}):e.jsx("span",{className:"admin-badge error",children:l}),S=l=>{s(h===l?null:l)},c=t.filter(l=>l.success).length,j=t.filter(l=>!l.success).length,B=t.length>0?Math.round(t.reduce((l,L)=>l+(L.processing_time_ms||0),0)/t.length):0,I=t.length>0?Math.round(c/t.length*100):0;return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:"Ä°stek LoglarÄ±"}),e.jsx("p",{className:"admin-header-subtitle",children:"AI tahmin sistemi gelen API istekleri"})]}),e.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:r,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"})]}),"Yenile"]})]}),e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"admin-stats-grid logs-stats",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon blue",children:e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]})})}),e.jsx("div",{className:"admin-stat-value",children:t.length}),e.jsx("div",{className:"admin-stat-label",children:"Toplam Ä°stek"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon green",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})}),e.jsx("div",{className:"admin-stat-value",children:c}),e.jsx("div",{className:"admin-stat-label",children:"BaÅŸarÄ±lÄ±"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon red",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("div",{className:"admin-stat-value",children:j}),e.jsx("div",{className:"admin-stat-label",children:"BaÅŸarÄ±sÄ±z"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon purple",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})})}),e.jsxs("div",{className:"admin-stat-value",children:[B,"ms"]}),e.jsx("div",{className:"admin-stat-label",children:"Ort. SÃ¼re"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon teal",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})})}),e.jsxs("div",{className:"admin-stat-value",children:[I,"%"]}),e.jsx("div",{className:"admin-stat-label",children:"BaÅŸarÄ± OranÄ±"})]})]}),e.jsx("div",{className:"admin-filter-row",children:e.jsxs("div",{className:"admin-filter-pills",children:[e.jsxs("button",{className:`admin-filter-pill ${f==="all"?"active":""}`,onClick:()=>y("all"),children:["TÃ¼mÃ¼ (",t.length,")"]}),e.jsx("button",{className:`admin-filter-pill ${f==="success"?"active":""}`,onClick:()=>y("success"),children:"âœ“ BaÅŸarÄ±lÄ±"}),e.jsx("button",{className:`admin-filter-pill ${f==="failed"?"active":""}`,onClick:()=>y("failed"),children:"âœ— BaÅŸarÄ±sÄ±z"})]})}),e.jsx("div",{className:"admin-logs-container",children:g?e.jsxs("div",{className:"admin-loading-state",children:[e.jsx("div",{className:"admin-spinner"}),e.jsx("p",{children:"Loglar yÃ¼kleniyor..."})]}):t.length===0?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),e.jsx("h3",{children:"HenÃ¼z istek yok"}),e.jsx("p",{children:"AI sisteminden istek bekleniyor"})]}):e.jsx("div",{className:"admin-logs-list",children:t.map(l=>e.jsxs("div",{className:`admin-log-card ${h===l.id?"expanded":""} ${l.success?"success":"failed"}`,children:[e.jsxs("div",{className:"admin-log-card-header",onClick:()=>S(l.id),children:[e.jsxs("div",{className:"admin-log-main",children:[e.jsxs("div",{className:"admin-log-status",children:[l.success?e.jsx("span",{className:"status-dot success"}):e.jsx("span",{className:"status-dot error"}),m(l.response_status,l.success)]}),e.jsxs("div",{className:"admin-log-info",children:[e.jsx("div",{className:"admin-log-endpoint",children:l.endpoint}),e.jsxs("div",{className:"admin-log-meta",children:[e.jsx("span",{className:"admin-log-time",children:N(l.created_at)}),e.jsx("span",{className:"admin-log-separator",children:"â€¢"}),e.jsx("span",{className:"admin-log-ip",children:l.source_ip}),e.jsx("span",{className:"admin-log-separator",children:"â€¢"}),e.jsxs("span",{className:"admin-log-duration",children:[l.processing_time_ms,"ms"]})]})]})]}),e.jsxs("div",{className:"admin-log-result",children:[l.success?e.jsx("span",{className:"admin-badge success",children:"OK"}):e.jsxs("span",{className:"admin-badge error",title:l.error_message||"",children:[(l.error_message||"Error").substring(0,20),(l.error_message||"").length>20?"...":""]}),e.jsx("svg",{className:"admin-log-chevron",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:h===l.id?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),h===l.id&&e.jsxs("div",{className:"admin-log-card-body",children:[e.jsxs("div",{className:"admin-log-details-grid",children:[e.jsxs("div",{className:"admin-log-detail-section",children:[e.jsx("div",{className:"admin-log-detail-label",children:"REQUEST BODY"}),e.jsx("pre",{className:"admin-log-detail-code",children:JSON.stringify(l.request_body,null,2)})]}),e.jsxs("div",{className:"admin-log-detail-section",children:[e.jsx("div",{className:"admin-log-detail-label",children:"RESPONSE BODY"}),e.jsx("pre",{className:"admin-log-detail-code",children:JSON.stringify(l.response_body,null,2)})]})]}),l.error_message&&e.jsxs("div",{className:"admin-log-error-section",children:[e.jsx("div",{className:"admin-log-detail-label error",children:"ERROR MESSAGE"}),e.jsx("div",{className:"admin-log-error-content",children:l.error_message})]})]})]},l.id))})})]})]})}const V="/api";function Bt(){const{botName:t}=Ae(),o=ke(),[g,u]=i.useState([]),[f,y]=i.useState([]),[h,s]=i.useState(!0),[r,N]=i.useState({total:0,pending:0,matched:0,winners:0,losers:0}),[m,S]=i.useState(!1),[c,j]=i.useState([]),[B,I]=i.useState([]),[l,L]=i.useState(""),[R,D]=i.useState(""),[M,n]=i.useState([]),[p,b]=i.useState([]),[d,w]=i.useState(!1),[A,$]=i.useState(!1),[W,F]=i.useState(!1),[z,ee]=i.useState(null),[te,q]=i.useState(!1),[K,x]=i.useState(!1),[_,P]=i.useState("country"),O=i.useCallback(async()=>{try{const a=await fetch(`${V}/predictions/bot-rules`);if(a.ok){const v=await a.json();v.success&&u(v.rules||[])}}catch(a){console.error("Fetch bot rules error:",a)}},[]),Y=i.useCallback(async(a,v)=>{try{const k=await fetch(`${V}/predictions/bot-rules/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});return k.ok&&(await k.json()).success||!1}catch(k){return console.error("Update bot rule error:",k),!1}},[]);i.useEffect(()=>{O()},[O]);const re=i.useMemo(()=>new Set(f.filter(a=>a.match_id).map(a=>a.match_id)),[f]);_e({onScoreChange:a=>{if(!re.has(a.matchId))return;const v=a.homeScore+a.awayScore;y(k=>k.map(T=>{if(T.match_id!==a.matchId||T.result!=="pending")return T;const C=T.prediction_threshold;return v>C?(console.log(`[AdminBotDetail] INSTANT WIN: ${T.prediction} (${v} > ${C})`),{...T,result:"won"}):T})),N(k=>{const T=f.filter(C=>C.match_id===a.matchId&&C.result==="pending").filter(C=>v>C.prediction_threshold).length;return{...k,winners:k.winners+T,pending:Math.max(0,k.pending-T)}})},onMatchStateChange:a=>{if(re.has(a.matchId)&&(a.statusId===3||a.statusId===8)){let v=0;y(k=>k.map(T=>{if(T.match_id!==a.matchId||T.result!=="pending")return T;const he=(T.minute_at_prediction||0)<=45;return a.statusId===3&&he?(console.log(`[AdminBotDetail] SETTLED (HT): ${T.prediction}`),v++,{...T,result:"lost"}):a.statusId===8&&!he?(console.log(`[AdminBotDetail] SETTLED (FT): ${T.prediction}`),v++,{...T,result:"lost"}):T})),v>0&&N(k=>({...k,losers:k.losers+v,pending:Math.max(0,k.pending-v)}))}}});const H=g.find(a=>a.bot_display_name===decodeURIComponent(t||""));i.useEffect(()=>{H&&(n(H.excluded_countries||[]),b(H.excluded_competitions||[]))},[H]);const U=i.useCallback(async a=>{$(!0);try{const v=a?`${V}/predictions/countries?search=${encodeURIComponent(a)}`:`${V}/predictions/countries`,k=await fetch(v);if(k.ok){const T=await k.json();T.success&&j(T.countries||[])}}catch(v){console.error("Fetch countries error:",v)}finally{$(!1)}},[]),J=i.useCallback(async a=>{F(!0);try{const v=a?`${V}/predictions/competitions?search=${encodeURIComponent(a)}`:`${V}/predictions/competitions`,k=await fetch(v);if(k.ok){const T=await k.json();T.success&&I(T.competitions||[])}}catch(v){console.error("Fetch competitions error:",v)}finally{F(!1)}},[]);i.useEffect(()=>{m&&(U(),J())},[m,U,J]),i.useEffect(()=>{if(!m)return;const a=setTimeout(()=>{U(l)},300);return()=>clearTimeout(a)},[l,m,U]),i.useEffect(()=>{if(!m)return;const a=setTimeout(()=>{J(R)},300);return()=>clearTimeout(a)},[R,m,J]);const Se=async()=>{if(H){w(!0);try{await Y(H.id,{excluded_countries:M,excluded_competitions:p})&&(O(),S(!1))}finally{w(!1)}}},le=a=>{n(v=>v.includes(a)?v.filter(k=>k!==a):[...v,a])},oe=a=>{b(v=>v.includes(a)?v.filter(k=>k!==a):[...v,a])},de=i.useCallback(async()=>{if(t){q(!0);try{const a=await fetch(`${V}/predictions/stats/bot/${encodeURIComponent(t)}/detailed`);if(a.ok){const v=await a.json();v.success&&ee({overall:v.overall,by_country:v.by_country||[],by_competition:v.by_competition||[]})}}catch(a){console.error("Fetch detailed stats error:",a)}finally{q(!1)}}},[t]);i.useEffect(()=>{t&&(ce(),de())},[t,de]);const ce=async()=>{if(t){s(!0);try{const a=await fetch(`${V}/predictions/bot/${encodeURIComponent(t)}?limit=100`);if(a.ok){const v=await a.json();if(v.success&&v.data){const k=(v.data.predictions||[]).map(C=>({id:C.id,external_id:C.external_id,canonical_bot_name:C.canonical_bot_name,league_name:C.league_name,home_team_name:C.home_team_name,away_team_name:C.away_team_name,score_at_prediction:C.score_at_prediction,minute_at_prediction:C.minute_at_prediction,prediction:C.prediction,prediction_threshold:C.prediction_threshold,match_id:C.match_id,result:C.result,final_score:C.final_score,result_reason:C.result_reason,created_at:C.created_at}));y(k);const T=v.data.bot;N(T?{total:T.total||k.length,pending:T.pending||k.filter(C=>C.result==="pending").length,matched:k.filter(C=>C.match_id).length,winners:T.won||0,losers:T.lost||0}:{total:k.length,pending:k.filter(C=>C.result==="pending").length,matched:k.filter(C=>C.match_id).length,winners:k.filter(C=>C.result==="won").length,losers:k.filter(C=>C.result==="lost").length})}}}catch(a){console.error("Fetch predictions error:",a)}finally{s(!1)}}},Ce=a=>new Date(a).toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Te=a=>a.result==="won"?e.jsx("span",{className:"admin-badge success",children:"KazandÄ±"}):a.result==="lost"?e.jsx("span",{className:"admin-badge error",children:"Kaybetti"}):a.result==="cancelled"?e.jsx("span",{className:"admin-badge neutral",children:"Ä°ptal"}):e.jsx("span",{className:"admin-badge warning",children:"Bekliyor"});return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:()=>o("/admin/bots"),style:{padding:"8px 12px"},children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:t}),e.jsx("p",{className:"admin-header-subtitle",children:"Bot tahmin geÃ§miÅŸi"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("button",{className:"admin-btn admin-btn-secondary",onClick:()=>S(!m),title:"Bot AyarlarÄ±",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M12 15a3 3 0 100-6 3 3 0 000 6z"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})]}),"Ayarlar"]}),e.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:ce,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"})]}),"Yenile"]})]})]}),e.jsxs("div",{className:"admin-content",children:[m&&e.jsxs("div",{className:"admin-table-container",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-table-header",style:{borderBottom:"1px solid var(--admin-border)"},children:[e.jsx("h3",{className:"admin-table-title",children:"Bot Exclusion AyarlarÄ±"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"admin-btn admin-btn-secondary",onClick:()=>S(!1),disabled:d,children:"Ä°ptal"}),e.jsx("button",{className:"admin-btn admin-btn-primary",onClick:Se,disabled:d,children:d?"Kaydediliyor...":"Kaydet"})]})]}),e.jsxs("div",{style:{padding:"24px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h4",{style:{color:"var(--admin-text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:["HariÃ§ Tutulan Ãœlkeler (",M.length,")"]}),e.jsx("input",{type:"text",placeholder:"Ãœlke ara...",value:l,onChange:a=>L(a.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid var(--admin-border)",borderRadius:"8px",background:"var(--admin-bg-secondary)",color:"var(--admin-text-primary)",marginBottom:"12px"}}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid var(--admin-border)",borderRadius:"8px",background:"var(--admin-bg-secondary)"},children:A?e.jsx("div",{style:{padding:"24px",textAlign:"center"},children:e.jsx("div",{className:"admin-spinner"})}):c.length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--admin-text-secondary)"},children:"Ãœlke bulunamadÄ±"}):c.map(a=>e.jsxs("div",{onClick:()=>le(a.id),style:{padding:"10px 12px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",borderBottom:"1px solid var(--admin-border)",background:M.includes(a.id)?"rgba(239, 68, 68, 0.1)":"transparent",transition:"background 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:M.includes(a.id),onChange:()=>{},style:{accentColor:"#ef4444"}}),a.logo&&e.jsx("img",{src:a.logo,alt:"",style:{width:"20px",height:"14px",objectFit:"cover",borderRadius:"2px"}}),e.jsx("span",{style:{color:M.includes(a.id)?"#ef4444":"var(--admin-text-primary)",fontSize:"13px"},children:a.name})]},a.id))})]}),e.jsxs("div",{children:[e.jsxs("h4",{style:{color:"var(--admin-text-primary)",marginBottom:"12px",fontSize:"14px",fontWeight:600},children:["HariÃ§ Tutulan Ligler (",p.length,")"]}),e.jsx("input",{type:"text",placeholder:"Lig ara...",value:R,onChange:a=>D(a.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid var(--admin-border)",borderRadius:"8px",background:"var(--admin-bg-secondary)",color:"var(--admin-text-primary)",marginBottom:"12px"}}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid var(--admin-border)",borderRadius:"8px",background:"var(--admin-bg-secondary)"},children:W?e.jsx("div",{style:{padding:"24px",textAlign:"center"},children:e.jsx("div",{className:"admin-spinner"})}):B.length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--admin-text-secondary)"},children:"Lig bulunamadÄ±"}):B.map(a=>e.jsxs("div",{onClick:()=>oe(a.id),style:{padding:"10px 12px",display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",borderBottom:"1px solid var(--admin-border)",background:p.includes(a.id)?"rgba(239, 68, 68, 0.1)":"transparent",transition:"background 0.15s"},children:[e.jsx("input",{type:"checkbox",checked:p.includes(a.id),onChange:()=>{},style:{accentColor:"#ef4444"}}),a.logo&&e.jsx("img",{src:a.logo,alt:"",style:{width:"20px",height:"20px",objectFit:"contain"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{color:p.includes(a.id)?"#ef4444":"var(--admin-text-primary)",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:a.name}),a.country_name&&e.jsx("div",{style:{color:"var(--admin-text-secondary)",fontSize:"11px"},children:a.country_name})]})]},a.id))})]})]}),(M.length>0||p.length>0)&&e.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid var(--admin-border)",background:"rgba(239, 68, 68, 0.05)"},children:[e.jsx("div",{style:{color:"#ef4444",fontSize:"12px",fontWeight:600,marginBottom:"8px"},children:"HARIÃ‡ TUTULANLAR"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[M.map(a=>{const v=c.find(k=>k.id===a);return e.jsxs("span",{onClick:()=>le(a),style:{padding:"4px 8px",background:"rgba(239, 68, 68, 0.2)",borderRadius:"4px",fontSize:"11px",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[v?.name||a,e.jsx("span",{style:{fontWeight:"bold"},children:"Ã—"})]},`country-${a}`)}),p.map(a=>{const v=B.find(k=>k.id===a);return e.jsxs("span",{onClick:()=>oe(a),style:{padding:"4px 8px",background:"rgba(239, 68, 68, 0.2)",borderRadius:"4px",fontSize:"11px",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[v?.name||a,e.jsx("span",{style:{fontWeight:"bold"},children:"Ã—"})]},`comp-${a}`)})]})]})]}),e.jsxs("div",{className:"admin-stats-grid",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon blue",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),e.jsx("div",{className:"admin-stat-value",children:r.total}),e.jsx("div",{className:"admin-stat-label",children:"Toplam Tahmin"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon yellow",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"admin-stat-value",children:r.pending}),e.jsx("div",{className:"admin-stat-label",children:"Bekleyen"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon teal",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})})}),e.jsx("div",{className:"admin-stat-value",children:r.matched}),e.jsx("div",{className:"admin-stat-label",children:"EÅŸleÅŸen"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon green",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})})}),e.jsx("div",{className:"admin-stat-value",children:r.winners}),e.jsx("div",{className:"admin-stat-label",children:"Kazanan"})]}),e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"admin-stat-card-header",children:e.jsx("div",{className:"admin-stat-icon red",children:e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})}),e.jsx("div",{className:"admin-stat-value",children:r.losers}),e.jsx("div",{className:"admin-stat-label",children:"Kaybeden"})]})]}),e.jsxs("div",{className:"admin-table-container",style:{marginBottom:"24px"},children:[e.jsxs("div",{className:"admin-table-header",style:{cursor:"pointer",borderBottom:K?"1px solid var(--admin-border)":"none"},onClick:()=>x(!K),children:[e.jsxs("h3",{className:"admin-table-title",style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:K?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:e.jsx("path",{d:"M9 18l6-6-6-6"})}),"Performans Analizi",z&&e.jsxs("span",{style:{fontSize:"12px",color:"var(--admin-text-secondary)",fontWeight:"normal"},children:["(",z.by_country.length," Ã¼lke, ",z.by_competition.length," lig)"]})]}),z&&e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:e.jsxs("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"13px",fontWeight:600,background:z.overall.win_rate>=60?"rgba(34, 197, 94, 0.15)":z.overall.win_rate>=40?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)",color:z.overall.win_rate>=60?"#22c55e":z.overall.win_rate>=40?"#eab308":"#ef4444"},children:["%",z.overall.win_rate," BaÅŸarÄ±"]})})]}),K&&e.jsx("div",{style:{padding:"16px"},children:te?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"32px"},children:e.jsx("div",{className:"admin-spinner"})}):z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"},children:[e.jsxs("button",{onClick:()=>P("country"),style:{padding:"8px 16px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:500,background:_==="country"?"var(--admin-primary)":"var(--admin-bg-secondary)",color:_==="country"?"white":"var(--admin-text-secondary)"},children:["Ãœlke BazlÄ± (",z.by_country.length,")"]}),e.jsxs("button",{onClick:()=>P("competition"),style:{padding:"8px 16px",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"13px",fontWeight:500,background:_==="competition"?"var(--admin-primary)":"var(--admin-bg-secondary)",color:_==="competition"?"white":"var(--admin-text-secondary)"},children:["Lig BazlÄ± (",z.by_competition.length,")"]})]}),e.jsxs("div",{style:{border:"1px solid var(--admin-border)",borderRadius:"8px",overflow:"hidden",maxHeight:"400px",overflowY:"auto"},children:[e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"var(--admin-bg-secondary)",position:"sticky",top:0},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",fontSize:"12px",color:"var(--admin-text-secondary)",fontWeight:600},children:_==="country"?"ÃœLKE":"LÄ°G"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",color:"var(--admin-text-secondary)",fontWeight:600},children:"TOPLAM"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",color:"#22c55e",fontWeight:600},children:"WIN"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",color:"#ef4444",fontWeight:600},children:"LOSS"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",fontSize:"12px",color:"#eab308",fontWeight:600},children:"PENDING"}),e.jsx("th",{style:{padding:"12px",textAlign:"right",fontSize:"12px",color:"var(--admin-text-secondary)",fontWeight:600},children:"WIN RATE"})]})}),e.jsx("tbody",{children:(_==="country"?z.by_country:z.by_competition).map((a,v)=>e.jsxs("tr",{style:{borderBottom:"1px solid var(--admin-border)"},children:[e.jsxs("td",{style:{padding:"12px",display:"flex",alignItems:"center",gap:"10px"},children:[(a.country_logo||a.competition_logo)&&e.jsx("img",{src:a.country_logo||a.competition_logo||"",alt:"",style:{width:_==="country"?"24px":"20px",height:_==="country"?"16px":"20px",objectFit:_==="country"?"cover":"contain",borderRadius:"2px"}}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"var(--admin-text-primary)",fontSize:"13px"},children:_==="country"?a.country_name:a.competition_name}),_==="competition"&&a.country_name&&e.jsx("div",{style:{color:"var(--admin-text-secondary)",fontSize:"11px"},children:a.country_name})]})]}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"var(--admin-text-primary)",fontSize:"13px"},children:a.total}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#22c55e",fontSize:"13px",fontWeight:600},children:a.wins}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#ef4444",fontSize:"13px",fontWeight:600},children:a.losses}),e.jsx("td",{style:{padding:"12px",textAlign:"center",color:"#eab308",fontSize:"13px"},children:a.pending}),e.jsx("td",{style:{padding:"12px",textAlign:"right"},children:e.jsxs("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:600,background:a.win_rate>=60?"rgba(34, 197, 94, 0.15)":a.win_rate>=40?"rgba(234, 179, 8, 0.15)":"rgba(239, 68, 68, 0.15)",color:a.win_rate>=60?"#22c55e":a.win_rate>=40?"#eab308":"#ef4444"},children:["%",a.win_rate]})})]},a.country_id||a.competition_id||v))})]}),(_==="country"?z.by_country:z.by_competition).length===0&&e.jsx("div",{style:{padding:"32px",textAlign:"center",color:"var(--admin-text-secondary)"},children:"HenÃ¼z veri yok"})]})]}):e.jsx("div",{style:{padding:"32px",textAlign:"center",color:"var(--admin-text-secondary)"},children:"Ä°statistik verisi bulunamadÄ±"})})]}),e.jsxs("div",{className:"admin-table-container",children:[e.jsx("div",{className:"admin-table-header",children:e.jsxs("h3",{className:"admin-table-title",children:[f.length," Tahmin"]})}),h?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"64px"},children:e.jsx("div",{className:"admin-spinner"})}):f.length===0?e.jsxs("div",{className:"admin-empty-state",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{children:"Tahmin bulunamadÄ±"}),e.jsx("p",{children:"Bu bot iÃ§in henÃ¼z tahmin geÃ§miÅŸi yok"})]}):e.jsx("div",{className:"admin-logs-list",children:f.map(a=>e.jsx("div",{className:`admin-log-card ${a.result==="won"?"success":a.result==="lost"?"error":""}`,children:e.jsxs("div",{className:"admin-log-card-header",style:{cursor:"default"},children:[e.jsxs("div",{className:"admin-log-main",children:[e.jsx("div",{className:"admin-log-status",children:Te(a)}),e.jsxs("div",{className:"admin-log-info",children:[e.jsxs("div",{className:"admin-log-endpoint",style:{color:"var(--admin-text-primary)",fontFamily:"inherit"},children:[a.home_team_name," vs ",a.away_team_name]}),e.jsxs("div",{className:"admin-log-meta",children:[e.jsx("span",{children:a.league_name||"Bilinmeyen Lig"}),e.jsx("span",{className:"admin-log-separator",children:"â€¢"}),e.jsxs("span",{children:[a.score_at_prediction," (",a.minute_at_prediction,"')"]}),e.jsx("span",{className:"admin-log-separator",children:"â€¢"}),e.jsx("span",{className:"admin-log-time",children:Ce(a.created_at)}),a.final_score&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"admin-log-separator",children:"â€¢"}),e.jsxs("span",{style:{color:"#22c55e"},children:["MS: ",a.final_score]})]})]})]})]}),e.jsx("div",{className:"admin-log-result",children:e.jsx("span",{className:"admin-badge info",style:{fontWeight:600},children:a.prediction})})]})},a.id))})]})]})]})}const Q="/api";function At(){const[t,o]=i.useState([]),[g,u]=i.useState(!0),[f,y]=i.useState(!1),[h,s]=i.useState([]),[r,N]=i.useState(null),[m,S]=i.useState(0),[c,j]=i.useState("VIP"),[B,I]=i.useState("IY 0.5 ÃœST"),[l,L]=i.useState(""),[R,D]=i.useState(!1),[M,n]=i.useState(""),[p,b]=i.useState(!1),[d,w]=i.useState(""),[A,$]=i.useState([]);i.useEffect(()=>{W(),F()},[]);const W=async()=>{u(!0);try{const x=await fetch(`${Q}/predictions/manual`);if(x.ok){const _=await x.json();_.success&&o(_.predictions)}}catch(x){console.error("Error fetching manual predictions:",x)}finally{u(!1)}},F=async()=>{try{const x=await fetch(`${Q}/matches/live`);if(x.ok){const _=await x.json();_.success&&_.data&&_.data.results&&s(_.data.results)}}catch(x){console.error("Error fetching live matches:",x)}},z=x=>{const _=h.find(P=>P.id===x);_&&(N(_),S(_.minute))},ee=()=>{if(!r)return;const x=B==="OTHER"?l:B,_={match_id:r.id,home_team:r.home_team_name,away_team:r.away_team_name,league:r.league_name||r.competition?.name||r.competition_name||"",score:`${r.home_score}-${r.away_score}`,minute:m,prediction:x,tempId:Date.now()};$([...A,_]),N(null),S(0),I("IY 0.5 ÃœST"),L("")},te=x=>{const _=[...A];_.splice(x,1),$(_)},q=async x=>{if(x.preventDefault(),p){if(A.length<2){alert("Kupon modu iÃ§in en az 2 maÃ§ eklemelisiniz!");return}if(!d){alert("LÃ¼tfen kupon baÅŸlÄ±ÄŸÄ± giriniz!");return}}else if(!r)return;D(!0);try{if(p){const _={title:d,access_type:c,items:A.map(({tempId:O,...Y})=>Y)},P=await fetch(`${Q}/predictions/manual-coupon`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(_)});if(P.ok)alert("Kupon baÅŸarÄ±yla oluÅŸturuldu!"),y(!1),W(),$([]),w(""),N(null),S(0);else{const O=await P.json();alert(`Hata: ${O.error||"Kupon oluÅŸturulamadÄ±"}`)}}else{const _=B==="OTHER"?l:B,P={match_id:r.id,home_team:r.home_team_name,away_team:r.away_team_name,league:r.league_name||r.competition?.name||r.competition_name||"",score:`${r.home_score}-${r.away_score}`,minute:m,prediction:_,access_type:c,bot_name:"Alert_System"},O=await fetch(`${Q}/predictions/manual`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(P)});if(O.ok)y(!1),W(),N(null),S(0);else{const Y=await O.json();alert(`Tahmin oluÅŸturulamadÄ±: ${Y.error||"Bilinmeyen hata"}`)}}}catch(_){console.error("Error creating prediction:",_),alert("Bir hata oluÅŸtu")}finally{D(!1)}},K=["IY 0.5 ÃœST","+1 Gol - (0.5 ÃœST)","IY 1.5 ÃœST","+1 Gol - (1.5 ÃœST)","IY 2.5 ÃœST","+1 Gol - (2.5 ÃœST)","MS 1","MS 2","MS 0","KG VAR","KG YOK"];return e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"admin-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:"Manuel CanlÄ± Tekli Tahminler"}),e.jsx("p",{className:"admin-header-subtitle",children:"CanlÄ± maÃ§lara manuel tahmin ekleyin ve yÃ¶netin"})]}),e.jsxs("button",{className:"admin-btn admin-btn-primary",onClick:()=>y(!0),children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 4v16m-8-8h16"})}),"Yeni OluÅŸtur"]})]}),e.jsxs("div",{className:"admin-content",children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:e.jsxs("div",{className:"admin-search",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:"TakÄ±m adÄ±, lig, tahmin...",value:M,onChange:x=>n(x.target.value)})]})}),e.jsx("div",{className:"admin-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"MaÃ§"}),e.jsx("th",{children:"Dakika"}),e.jsx("th",{children:"Tahmin"}),e.jsx("th",{children:"EriÅŸim"}),e.jsx("th",{children:"OluÅŸturulma"}),e.jsx("th",{children:"Durum"}),e.jsx("th",{children:"Ä°ÅŸlemler"})]})}),e.jsx("tbody",{children:g?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",style:{padding:"32px",textAlign:"center",color:"var(--admin-text-secondary)"},children:"YÃ¼kleniyor..."})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",style:{padding:"64px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",style:{color:"var(--admin-text-muted)"},children:e.jsx("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),e.jsx("p",{style:{margin:0,color:"var(--admin-text-secondary)"},children:"HenÃ¼z manuel tahmin yok."})]})})}):t.filter(x=>!M||x.home_team_name.toLowerCase().includes(M.toLowerCase())||x.away_team_name.toLowerCase().includes(M.toLowerCase())).map((x,_)=>e.jsxs("tr",{children:[e.jsx("td",{children:_+1}),e.jsx("td",{children:e.jsxs("div",{className:"match-cell",children:[e.jsx("span",{className:"league-hint",children:x.league_name}),e.jsxs("div",{className:"teams",children:[x.home_team_name," vs ",x.away_team_name]})]})}),e.jsx("td",{children:e.jsxs("span",{className:"minute-badge",children:[x.minute_at_prediction,"'"]})}),e.jsx("td",{children:e.jsx("span",{className:"prediction-badge",children:x.prediction})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${x.access_type==="VIP"?"vip":"free"}`,children:x.access_type||"VIP"})}),e.jsx("td",{children:new Date(x.created_at).toLocaleString("tr-TR")}),e.jsx("td",{children:e.jsx("span",{className:`status-tag ${x.result||"pending"}`,children:x.result==="won"?"KAZANDI":x.result==="lost"?"KAYBETTÄ°":"BEKLÄ°YOR"})}),e.jsx("td",{children:e.jsx("div",{className:"actions",children:e.jsx("button",{className:"icon-btn delete",title:"Sil",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})})})]},x.id))})]})})]}),f&&e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content large",style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 4v16m-8-8h16"})}),p?"Kombine Kupon OluÅŸtur":"Tekli Tahmin OluÅŸtur",e.jsxs("span",{className:"live-count",children:[h.length," canlÄ± maÃ§"]})]}),e.jsx("button",{className:"close-btn",onClick:()=>y(!1),children:"Ã—"})]}),e.jsxs("form",{onSubmit:q,children:[e.jsx("div",{style:{padding:"0 24px 16px",borderBottom:"1px solid var(--admin-border)"},children:e.jsxs("div",{style:{display:"flex",gap:"16px",alignItems:"center"},children:[e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:p?"var(--admin-text-secondary)":"var(--admin-primary)"},children:[e.jsx("input",{type:"radio",checked:!p,onChange:()=>b(!1)}),"Tekli Tahmin"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",color:p?"var(--admin-primary)":"var(--admin-text-secondary)"},children:[e.jsx("input",{type:"radio",checked:p,onChange:()=>b(!0)}),"Kombine Kupon"]})]})}),e.jsxs("div",{className:"form-grid",style:{marginTop:"16px"},children:[p&&e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Kupon BaÅŸlÄ±ÄŸÄ±"}),e.jsx("input",{type:"text",className:"admin-input",placeholder:"Ã–rn: Cumartesi Banko Kupon #1",value:d,onChange:x=>w(x.target.value),required:p})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"MaÃ§ SeÃ§"}),e.jsxs("select",{className:"admin-input",value:r?.id||"",onChange:x=>z(x.target.value),required:!p&&A.length===0,children:[e.jsx("option",{value:"",children:"MaÃ§ SeÃ§iniz..."}),h.map(x=>e.jsxs("option",{value:x.id,children:[x.home_team_name," ",x.home_score,"-",x.away_score," ",x.away_team_name," (",x.minute,"')"]},x.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dakika"}),e.jsx("input",{type:"number",className:"admin-input",value:m,onChange:x=>S(parseInt(x.target.value)),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"EriÅŸim"}),e.jsxs("select",{className:"admin-input",value:c,onChange:x=>j(x.target.value),children:[e.jsx("option",{value:"VIP",children:"VIP"}),e.jsx("option",{value:"FREE",children:"FREE"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Tahmin"}),e.jsxs("select",{className:"admin-input",value:B,onChange:x=>I(x.target.value),children:[K.map(x=>e.jsx("option",{value:x,children:x},x)),e.jsx("option",{value:"OTHER",children:"DiÄŸer (Manuel Gir)"})]})]}),B==="OTHER"&&e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{children:"Ã–zel Tahmin"}),e.jsx("input",{type:"text",className:"admin-input",placeholder:"Ã–rn: Ev Sahibi 1.5 Ãœst",value:l,onChange:x=>L(x.target.value)})]}),p&&e.jsx("div",{className:"form-group full-width",children:e.jsx("button",{type:"button",className:"admin-btn admin-btn-secondary",onClick:ee,disabled:!r,style:{width:"100%",justifyContent:"center"},children:"+ Kupona Ekle"})})]}),p&&A.length>0&&e.jsxs("div",{style:{margin:"16px 24px",background:"var(--admin-bg-secondary)",borderRadius:"8px",padding:"12px"},children:[e.jsxs("h4",{style:{margin:"0 0 12px",fontSize:"14px",color:"var(--admin-text-secondary)"},children:["Kupon Ä°Ã§eriÄŸi (",A.length," MaÃ§)"]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:A.map((x,_)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",background:"var(--admin-bg-main)",padding:"8px 12px",borderRadius:"4px",border:"1px solid var(--admin-border)"},children:[e.jsxs("div",{style:{fontSize:"13px"},children:[e.jsxs("div",{style:{fontWeight:600},children:[x.home_team," vs ",x.away_team]}),e.jsxs("div",{style:{color:"var(--admin-primary)"},children:[x.prediction," ",e.jsxs("span",{style:{color:"var(--admin-text-secondary)",fontSize:"12px"},children:["(",x.minute,"')"]})]})]}),e.jsx("button",{type:"button",onClick:()=>te(_),style:{background:"none",border:"none",color:"#ff4444",cursor:"pointer"},children:"Ã—"})]},x.tempId))})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"admin-btn admin-btn-secondary",onClick:()=>y(!1),children:"Ä°ptal"}),e.jsx("button",{type:"submit",className:"admin-btn admin-btn-primary",disabled:R,children:R?"Kaydediliyor...":p?`Kuponu OluÅŸtur (${A.length})`:"Kaydet"})]})]})]})})]})}const ie="/api";async function rt(){const t=await fetch(`${ie}/footystats/today`);if(!t.ok)throw new Error("Failed to fetch matches");return{data:((await t.json()).matches||[]).map(u=>({...u,id:u.fs_id,external_id:`fs_${u.fs_id}`,competition_name:u.league_name,btts_potential:u.potentials?.btts,o25_potential:u.potentials?.over25,o15_potential:u.potentials?.avg,team_a_xg_prematch:u.xg?.home,team_b_xg_prematch:u.xg?.away,odds_ft_1:u.odds?.home,odds_ft_x:u.odds?.draw,odds_ft_2:u.odds?.away}))}}async function lt(t,o,g){const u=await fetch(`${ie}/telegram/publish/match/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({match_id:o,picks:g})});if(!u.ok){const f=await u.json();throw new Error(f.error||"Failed to publish")}return u.json()}async function ot(){const t=await fetch(`${ie}/telegram/health`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch health");return t.json()}const dt="/api";function ct({match:t,isSelected:o,onSelect:g}){const f=new Date(t.date_unix*1e3).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),[y,h]=i.useState(!1),[s,r]=i.useState(null),[N,m]=i.useState(!1),[S,c]=i.useState(null),j=async l=>{if(l.stopPropagation(),!y&&!s&&!N){m(!0),c(null);try{const L=await fetch(`${dt}/footystats/match/${t.id}`);if(!L.ok)throw new Error("Failed to fetch match details");const R=await L.json();r(R)}catch(L){c(L.message||"Failed to load details")}finally{m(!1)}}h(!y)},B=l=>{switch(l){case"great":return"#10b981";case"good":return"#059669";case"neutral":return"#6b7280";case"bad":return"#ef4444";case"terrible":return"#dc2626";default:return"#6b7280"}},I=l=>{switch(l){case"great":case"good":return"âœ…";case"neutral":return"âž–";case"bad":case"terrible":return"âš ï¸";default:return"â€¢"}};return e.jsxs("div",{style:{padding:"16px",border:`2px solid ${o?"#3b82f6":"#e5e7eb"}`,borderRadius:"8px",background:o?"#eff6ff":"white",transition:"all 0.2s ease"},onMouseEnter:l=>{o||(l.currentTarget.style.borderColor="#d1d5db")},onMouseLeave:l=>{o||(l.currentTarget.style.borderColor="#e5e7eb")},children:[e.jsxs("div",{onClick:g,style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:[t.competition_name||"Unknown League"," â€¢ ",f]}),e.jsxs("div",{style:{fontSize:"14px",fontWeight:"600",color:"#1f2937",marginBottom:"12px"},children:[t.home_name," vs ",t.away_name]}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#4b5563"},children:[t.btts_potential&&e.jsxs("span",{children:["BTTS: %",t.btts_potential]}),t.o25_potential&&e.jsxs("span",{children:["O2.5: %",t.o25_potential]}),t.o15_potential&&e.jsxs("span",{children:["O1.5: %",t.o15_potential]}),t.team_a_xg_prematch!==void 0&&t.team_b_xg_prematch!==void 0&&e.jsxs("span",{children:["xG: ",t.team_a_xg_prematch.toFixed(1)," - ",t.team_b_xg_prematch.toFixed(1)]})]})]}),e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",border:`2px solid ${o?"#3b82f6":"#d1d5db"}`,background:o?"#3b82f6":"white",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o&&e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})})]}),e.jsxs("div",{onClick:j,style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",fontSize:"13px",color:"#3b82f6",fontWeight:"500",transition:"color 0.2s ease"},onMouseEnter:l=>{l.currentTarget.style.color="#2563eb"},onMouseLeave:l=>{l.currentTarget.style.color="#3b82f6"},children:[e.jsx("span",{children:y?"DetaylarÄ± Gizle":"DetaylÄ± Analiz GÃ¶ster"}),e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{transform:y?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"},children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),y&&e.jsxs("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e5e7eb"},children:[N&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280"},children:"DetaylÄ± analiz yÃ¼kleniyor..."}),S&&e.jsxs("div",{style:{padding:"12px",background:"#fee2e2",color:"#dc2626",borderRadius:"6px",fontSize:"13px"},children:["âŒ ",S]}),s&&!N&&e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(s.potentials.corners||s.potentials.cards)&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"ðŸŽ² EXTRA POTANSÄ°YELLER"}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#4b5563"},children:[s.potentials.corners&&e.jsxs("span",{children:["Korner: %",s.potentials.corners]}),s.potentials.cards&&e.jsxs("span",{children:["Kartlar: %",s.potentials.cards]})]})]}),(s.form.home||s.form.away)&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"ðŸ… TAKIM FORMU"}),s.form.home&&e.jsxs("div",{style:{marginBottom:"8px",fontSize:"12px"},children:[e.jsxs("div",{style:{fontWeight:"500",color:"#4b5563",marginBottom:"4px"},children:[t.home_name," (Ev Sahibi)"]}),e.jsxs("div",{style:{color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[s.form.home.overall&&e.jsxs("span",{children:["Form: ",s.form.home.overall]}),s.form.home.ppg&&e.jsxs("span",{children:["PPG: ",s.form.home.ppg.toFixed(1)]}),s.form.home.btts_pct&&e.jsxs("span",{children:["BTTS: %",s.form.home.btts_pct]}),s.form.home.over25_pct&&e.jsxs("span",{children:["O2.5: %",s.form.home.over25_pct]})]})]}),s.form.away&&e.jsxs("div",{style:{fontSize:"12px"},children:[e.jsxs("div",{style:{fontWeight:"500",color:"#4b5563",marginBottom:"4px"},children:[t.away_name," (Deplasman)"]}),e.jsxs("div",{style:{color:"#6b7280",display:"flex",gap:"12px",flexWrap:"wrap"},children:[s.form.away.overall&&e.jsxs("span",{children:["Form: ",s.form.away.overall]}),s.form.away.ppg&&e.jsxs("span",{children:["PPG: ",s.form.away.ppg.toFixed(1)]}),s.form.away.btts_pct&&e.jsxs("span",{children:["BTTS: %",s.form.away.btts_pct]}),s.form.away.over25_pct&&e.jsxs("span",{children:["O2.5: %",s.form.away.over25_pct]})]})]})]}),s.h2h&&s.h2h.total_matches>0&&e.jsxs("div",{style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",padding:"16px",borderRadius:"12px",border:"1px solid #e2e8f0"},children:[e.jsxs("div",{style:{fontSize:"14px",fontWeight:"700",color:"#1e293b",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{children:"ðŸ”„"}),e.jsx("span",{children:"KAFA KAFAYA ANALÄ°ZÄ°"}),e.jsxs("span",{style:{fontSize:"11px",fontWeight:"500",color:"#64748b"},children:["(Son ",s.h2h.total_matches," MaÃ§)"]})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",fontWeight:"600",color:"#475569",marginBottom:"6px"},children:[e.jsx("span",{children:t.home_name}),e.jsx("span",{style:{color:"#94a3b8"},children:"Beraberlik"}),e.jsx("span",{children:t.away_name})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",marginBottom:"6px"},children:[e.jsx("div",{style:{flex:s.h2h.home_wins,minWidth:s.h2h.home_wins>0?"30px":"0",height:"32px",background:"#10b981",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",color:"white"},children:s.h2h.home_wins>0&&`${s.h2h.home_wins}G`}),e.jsx("div",{style:{flex:s.h2h.draws,minWidth:s.h2h.draws>0?"30px":"0",height:"32px",background:"#64748b",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",color:"white"},children:s.h2h.draws>0&&`${s.h2h.draws}B`}),e.jsx("div",{style:{flex:s.h2h.away_wins,minWidth:s.h2h.away_wins>0?"30px":"0",height:"32px",background:"#3b82f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",color:"white"},children:s.h2h.away_wins>0&&`${s.h2h.away_wins}G`})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",fontWeight:"600",color:"#64748b"},children:[e.jsxs("span",{children:[Math.round(s.h2h.home_wins/s.h2h.total_matches*100),"%"]}),e.jsxs("span",{children:[Math.round(s.h2h.draws/s.h2h.total_matches*100),"%"]}),e.jsxs("span",{children:[Math.round(s.h2h.away_wins/s.h2h.total_matches*100),"%"]})]})]}),e.jsxs("div",{style:{marginBottom:"12px",paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#475569",marginBottom:"8px"},children:"ðŸ“Š GOL Ä°STATÄ°STÄ°KLERÄ°"}),s.h2h.over15_pct!==void 0&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#64748b",fontWeight:"500"},children:"Over 1.5"}),e.jsxs("span",{style:{fontWeight:"700",color:"#1e293b"},children:["%",s.h2h.over15_pct,e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",marginLeft:"4px"},children:["(",Math.round(s.h2h.over15_pct/100*s.h2h.total_matches),"/",s.h2h.total_matches,")"]})]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#e2e8f0",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.h2h.over15_pct}%`,height:"100%",background:"linear-gradient(90deg, #10b981 0%, #059669 100%)",transition:"width 0.3s ease"}})})]}),s.h2h.over25_pct!==void 0&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#64748b",fontWeight:"500"},children:"Over 2.5"}),e.jsxs("span",{style:{fontWeight:"700",color:"#1e293b"},children:["%",s.h2h.over25_pct,e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",marginLeft:"4px"},children:["(",Math.round(s.h2h.over25_pct/100*s.h2h.total_matches),"/",s.h2h.total_matches,")"]})]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#e2e8f0",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.h2h.over25_pct}%`,height:"100%",background:"linear-gradient(90deg, #f59e0b 0%, #d97706 100%)",transition:"width 0.3s ease"}})})]}),s.h2h.over35_pct!==void 0&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#64748b",fontWeight:"500"},children:"Over 3.5"}),e.jsxs("span",{style:{fontWeight:"700",color:"#1e293b"},children:["%",s.h2h.over35_pct,e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",marginLeft:"4px"},children:["(",Math.round(s.h2h.over35_pct/100*s.h2h.total_matches),"/",s.h2h.total_matches,")"]})]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#e2e8f0",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.h2h.over35_pct}%`,height:"100%",background:"linear-gradient(90deg, #ef4444 0%, #dc2626 100%)",transition:"width 0.3s ease"}})})]}),s.h2h.btts_pct!==void 0&&s.h2h.btts_pct!==null&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",marginBottom:"4px"},children:[e.jsx("span",{style:{color:"#64748b",fontWeight:"500"},children:"BTTS (KarÅŸÄ±lÄ±klÄ± Gol)"}),e.jsxs("span",{style:{fontWeight:"700",color:"#1e293b"},children:["%",s.h2h.btts_pct,e.jsxs("span",{style:{fontSize:"10px",color:"#94a3b8",marginLeft:"4px"},children:["(",Math.round(s.h2h.btts_pct/100*s.h2h.total_matches),"/",s.h2h.total_matches,")"]})]})]}),e.jsx("div",{style:{width:"100%",height:"6px",background:"#e2e8f0",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${s.h2h.btts_pct}%`,height:"100%",background:"linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%)",transition:"width 0.3s ease"}})})]}),s.h2h.avg_goals&&e.jsxs("div",{style:{marginTop:"12px",padding:"8px 12px",background:"#f1f5f9",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"11px",color:"#64748b",fontWeight:"500"},children:"Ortalama Gol"}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"700",color:"#1e293b"},children:s.h2h.avg_goals.toFixed(1)})]})]}),(s.h2h.home_clean_sheets_pct!==void 0||s.h2h.away_clean_sheets_pct!==void 0)&&e.jsxs("div",{style:{paddingTop:"12px",borderTop:"1px solid #e2e8f0"},children:[e.jsx("div",{style:{fontSize:"12px",fontWeight:"600",color:"#475569",marginBottom:"8px"},children:"ðŸ›¡ï¸ KALE TEMÄ°Z"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[s.h2h.home_clean_sheets_pct!==void 0&&e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",marginBottom:"4px",fontWeight:"500"},children:t.home_name}),e.jsx("div",{style:{padding:"8px",background:"#ecfdf5",borderRadius:"6px",textAlign:"center",border:"1px solid #a7f3d0"},children:e.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"#059669"},children:["%",s.h2h.home_clean_sheets_pct]})})]}),s.h2h.away_clean_sheets_pct!==void 0&&e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontSize:"10px",color:"#64748b",marginBottom:"4px",fontWeight:"500"},children:t.away_name}),e.jsx("div",{style:{padding:"8px",background:"#eff6ff",borderRadius:"6px",textAlign:"center",border:"1px solid #bfdbfe"},children:e.jsxs("div",{style:{fontSize:"16px",fontWeight:"700",color:"#2563eb"},children:["%",s.h2h.away_clean_sheets_pct]})})]})]})]})]}),(s.trends.home.length>0||s.trends.away.length>0)&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"ðŸ“ˆ TREND ANALÄ°ZÄ°"}),s.trends.home.length>0&&e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280",marginBottom:"4px"},children:t.home_name}),s.trends.home.slice(0,3).map((l,L)=>e.jsxs("div",{style:{fontSize:"12px",color:B(l.sentiment),marginBottom:"2px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:I(l.sentiment)}),e.jsx("span",{children:l.text})]},L))]}),s.trends.away.length>0&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"11px",fontWeight:"500",color:"#6b7280",marginBottom:"4px"},children:t.away_name}),s.trends.away.slice(0,3).map((l,L)=>e.jsxs("div",{style:{fontSize:"12px",color:B(l.sentiment),marginBottom:"2px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:I(l.sentiment)}),e.jsx("span",{children:l.text})]},L))]})]}),s.odds&&e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#1f2937",marginBottom:"8px"},children:"ðŸ’° ORANLAR"}),e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"12px",color:"#6b7280"},children:[s.odds.home&&e.jsxs("span",{children:["Ev: ",s.odds.home.toFixed(2)]}),s.odds.draw&&e.jsxs("span",{children:["Beraberlik: ",s.odds.draw.toFixed(2)]}),s.odds.away&&e.jsxs("span",{children:["Deplasman: ",s.odds.away.toFixed(2)]})]})]})]})]})]})}const Ne=[{market_type:"BTTS_YES",label:"KarÅŸÄ±lÄ±klÄ± Gol (BTTS)",emoji:"âš½âš½"},{market_type:"O25_OVER",label:"Alt/Ãœst 2.5 Gol",emoji:"ðŸŽ¯"},{market_type:"O15_OVER",label:"Alt/Ãœst 1.5 Gol",emoji:"ðŸŽ¯"},{market_type:"HT_O05_OVER",label:"Ä°lk YarÄ± 0.5 Ãœst",emoji:"â±ï¸"}];function ht({match:t,picks:o,onPickToggle:g,onPublish:u,publishing:f}){if(!t)return e.jsx("div",{style:{padding:"24px",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb",textAlign:"center",color:"#6b7280"},children:"â† Bir maÃ§ seÃ§in"});const y=new Date(t.date_unix*1e3),h=y.toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),s=y.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit"});let r=`âš½ ${t.home_name} vs ${t.away_name}
`;r+=`ðŸ† ${t.competition_name||"Bilinmeyen Lig"} | ðŸ• ${s} ${h}

`,(t.btts_potential||t.o25_potential||t.o15_potential)&&(r+=`ðŸ“Š Ä°statistikler:
`,t.btts_potential&&(r+=`â€¢ BTTS: %${t.btts_potential} âš½âš½
`),t.o25_potential&&(r+=`â€¢ Alt/Ãœst 2.5: %${t.o25_potential}
`),t.o15_potential&&(r+=`â€¢ Alt/Ãœst 1.5: %${t.o15_potential}
`),r+=`
`),t.team_a_xg_prematch!==void 0&&t.team_b_xg_prematch!==void 0&&(r+=`âš¡ Beklenen Gol (xG):
`,r+=`${t.home_name}: ${t.team_a_xg_prematch.toFixed(2)} | ${t.away_name}: ${t.team_b_xg_prematch.toFixed(2)}
`,r+=`Toplam: ${(t.team_a_xg_prematch+t.team_b_xg_prematch).toFixed(2)}

`);const N=(t.team_a_xg_prematch||0)+(t.team_b_xg_prematch||0);return r+=`ðŸ§  Trendler (Ev):
`,N>=2.5?r+=`â€¢ YÃ¼ksek gol beklentisi (xG: ${N.toFixed(1)})
`:r+=`â€¢ Orta gol beklentisi (xG: ${N.toFixed(1)})
`,r+=`â€¢ Ev sahibi avantajÄ± mevcut
`,r+=`â€¢ Orta seviyede hÃ¼cum performansÄ±
`,r+=`
`,r+=`ðŸ§  Trendler (Dep):
`,(t.team_b_xg_prematch||0)>=1.5?r+=`â€¢ Deplasmanda ofansif (xG: ${(t.team_b_xg_prematch||0).toFixed(1)})
`:r+=`â€¢ Deplasmanda pasif ofans (xG: ${(t.team_b_xg_prematch||0).toFixed(1)})
`,r+=`â€¢ Orta seviye deplasman formu
`,r+=`â€¢ Kontra atak potansiyeli var
`,r+=`
`,o.length>0&&(r+=`ðŸŽ¯ Tahmini Piyasalar:
`,o.forEach(m=>{const S=Ne.find(c=>c.market_type===m.market_type);if(S){const c=m.odds?` @${m.odds.toFixed(2)}`:"";r+=`â€¢ ${S.label}${c}
`}}),r+=`
`),t.odds_ft_1&&t.odds_ft_x&&t.odds_ft_2&&(r+=`ðŸ’° Oranlar: ${t.odds_ft_1.toFixed(2)} | ${t.odds_ft_x.toFixed(2)} | ${t.odds_ft_2.toFixed(2)}`),e.jsxs("div",{style:{padding:"24px",background:"white",borderRadius:"12px",border:"1px solid #e5e7eb"},children:[e.jsx("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#1f2937"},children:"Mesaj Ã–nizleme"}),e.jsx("div",{style:{padding:"16px",background:"#f9fafb",borderRadius:"8px",marginBottom:"20px",fontSize:"13px",lineHeight:"1.6",fontFamily:"monospace",color:"#374151",whiteSpace:"pre-wrap",maxHeight:"300px",overflowY:"auto"},children:r}),e.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:"#1f2937"},children:"Tahmin SeÃ§imi"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},children:Ne.map(m=>{const S=o.some(c=>c.market_type===m.market_type);return e.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"12px",border:`2px solid ${S?"#3b82f6":"#e5e7eb"}`,borderRadius:"8px",cursor:"pointer",background:S?"#eff6ff":"white",transition:"all 0.2s ease"},children:[e.jsx("input",{type:"checkbox",checked:S,onChange:()=>g(m.market_type),style:{marginRight:"12px"}}),e.jsxs("span",{style:{fontSize:"14px",color:"#1f2937"},children:[m.emoji," ",m.label]})]},m.market_type)})}),e.jsx("button",{onClick:u,disabled:o.length===0||f,style:{width:"100%",padding:"14px",background:o.length===0||f?"#d1d5db":"linear-gradient(135deg, #3b82f6, #2563eb)",color:"white",border:"none",borderRadius:"8px",fontSize:"15px",fontWeight:"600",cursor:o.length===0||f?"not-allowed":"pointer",transition:"all 0.2s ease"},children:f?"YayÄ±nlanÄ±yor...":`Telegram'da YayÄ±nla (${o.length} tahmin)`}),o.length===0&&e.jsx("p",{style:{fontSize:"12px",color:"#6b7280",marginTop:"8px",textAlign:"center"},children:"En az bir tahmin seÃ§melisiniz"})]})}function Lt(){const[t,o]=i.useState([]),[g,u]=i.useState(!0),[f,y]=i.useState(null),[h,s]=i.useState(null),[r,N]=i.useState([]),[m,S]=i.useState(null),[c,j]=i.useState(!1),[B,I]=i.useState(!1);i.useEffect(()=>{l(),L()},[]);const l=async()=>{u(!0),y(null);try{const n=await rt();o(n.data||[])}catch(n){y(n.message||"Failed to load matches")}finally{u(!1)}},L=async()=>{try{const n=await ot();S(n)}catch(n){console.error("Failed to load bot health:",n)}},R=n=>{s(n),N([]),I(!1)},D=(n,p)=>{const b=r.find(d=>d.market_type===n);N(b?r.filter(d=>d.market_type!==n):[...r,{market_type:n,odds:p}])},M=async()=>{if(!h||!h.external_id){alert("Match must have external_id (TheSports match ID)");return}j(!0),y(null);try{await lt(h.id,h.external_id,r),I(!0),setTimeout(()=>{I(!1)},3e3)}catch(n){y(n.message||"Failed to publish to Telegram")}finally{j(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"admin-header",children:e.jsxs("div",{children:[e.jsx("h1",{className:"admin-header-title",children:"Telegram YayÄ±n Sistemi"}),e.jsxs("p",{className:"admin-header-subtitle",children:["FootyStats MaÃ§larÄ±nÄ± Telegram'da YayÄ±nla",m&&e.jsxs("span",{style:{marginLeft:"12px",color:m.configured?"#10b981":"#ef4444"},children:["â€¢ Bot ",m.configured?"Aktif":"Pasif"]})]})]})}),e.jsxs("div",{className:"admin-content",children:[f&&e.jsx("div",{style:{padding:"16px",marginBottom:"20px",background:"#fee2e2",color:"#dc2626",borderRadius:"8px",border:"1px solid #fecaca"},children:f}),B&&e.jsx("div",{style:{padding:"16px",marginBottom:"20px",background:"#d1fae5",color:"#059669",borderRadius:"8px",border:"1px solid #a7f3d0"},children:"âœ… BaÅŸarÄ±yla Telegram'da yayÄ±nlandÄ±!"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 400px",gap:"24px"},children:[e.jsxs("div",{children:[e.jsxs("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"16px",color:"#1f2937"},children:["BugÃ¼nÃ¼n MaÃ§larÄ± (",t.length,")"]}),g&&e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"MaÃ§lar yÃ¼kleniyor..."}),!g&&t.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"BugÃ¼n iÃ§in maÃ§ bulunamadÄ±"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:t.map(n=>e.jsx(ct,{match:n,isSelected:h?.id===n.id,onSelect:()=>R(n)},n.id))})]}),e.jsx("div",{style:{position:"sticky",top:"20px",alignSelf:"start"},children:e.jsx(ht,{match:h,picks:r,onPickToggle:D,onPublish:M,publishing:c})})]})]})]})}const xt=({className:t})=>e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"})}),mt=({className:t})=>e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})}),pt=({className:t})=>e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),ut=({className:t})=>e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-5.94-2.28m5.94 2.28l-2.28 5.941"})}),gt=({className:t})=>e.jsxs("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),jt=({className:t})=>e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),ft={OVER_25:"2.5 ÃœST",OVER_15:"1.5 ÃœST",BTTS:"BTTS (KarÅŸÄ±lÄ±klÄ± Gol)",HT_OVER_05:"Ä°Y 0.5 ÃœST",CORNERS:"KORNER",CARDS:"KART"},yt={OVER_25:"bg-blue-100 text-blue-800 border-blue-300",OVER_15:"bg-indigo-100 text-indigo-800 border-indigo-300",BTTS:"bg-green-100 text-green-800 border-green-300",HT_OVER_05:"bg-purple-100 text-purple-800 border-purple-300",CORNERS:"bg-orange-100 text-orange-800 border-orange-300",CARDS:"bg-yellow-100 text-yellow-800 border-yellow-300"};function Mt(){const[t,o]=i.useState([]),[g,u]=i.useState(!0),[f,y]=i.useState(null),[h,s]=i.useState(null),[r,N]=i.useState(null),m=async()=>{u(!0),s(null);try{const c=await fetch("/api/telegram/daily-lists/today");if(!c.ok)throw new Error("API hatasÄ±");const j=await c.json();console.log("ðŸ“Š Daily Lists API Response:",j.lists_count,"lists"),console.log("Markets:",j.lists.map(B=>B.market)),o(j.lists||[]),N(j.generated_at)}catch(c){s(c.message)}finally{u(!1)}},S=async c=>{if(confirm(`"${c.title}" listesini Telegram'a yayÄ±nlamak istediÄŸinizden emin misiniz?`)){y(c.market),s(null);try{const j=await fetch(`/api/telegram/publish/daily-list/${c.market}`,{method:"POST"});if(!j.ok)throw new Error("YayÄ±nlama hatasÄ±");const B=await j.json();B.success?(alert(`âœ… BaÅŸarÄ±lÄ±!

"${c.title}" Telegram'a yayÄ±nlandÄ±.
Mesaj ID: ${B.telegram_message_id}`),await m()):alert(`âš ï¸ ${B.message||"YayÄ±nlama baÅŸarÄ±sÄ±z"}`)}catch(j){s(j.message),alert(`âŒ Hata: ${j.message}`)}finally{y(null)}}};return i.useEffect(()=>{m()},[]),g?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Listeler yÃ¼kleniyor..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ðŸ“Š GÃ¼nlÃ¼k Telegram Listeleri"}),e.jsx("p",{className:"text-gray-600",children:"Otomatik oluÅŸturulan gÃ¼nlÃ¼k tahmin listeleri"}),r&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Son gÃ¼ncelleme: ",new Date(r).toLocaleString("tr-TR")]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:m,disabled:g,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50",children:[e.jsx(mt,{className:"w-4 h-4"}),"Yenile"]})})]})}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:[e.jsx("strong",{className:"font-bold",children:"Hata: "}),e.jsx("span",{children:h})]}),t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[e.jsx(xt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"BugÃ¼n iÃ§in uygun maÃ§ bulunamadÄ±"}),e.jsx("p",{className:"text-gray-500",children:"Yeterli gÃ¼ven skoruna sahip maÃ§ olmadÄ±ÄŸÄ±nda listeler oluÅŸturulmaz."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:t.map(c=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsxs("div",{className:`p-4 border-b-2 ${yt[c.market]}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx("span",{children:c.emoji}),e.jsx("span",{children:ft[c.market]})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold",children:[e.jsx(ut,{className:"w-4 h-4"}),c.avg_confidence,"/100"]})]}),e.jsxs("p",{className:"text-sm opacity-80",children:[c.matches_count," maÃ§ seÃ§ildi"]})]}),e.jsx("div",{className:"p-4 space-y-3",children:c.matches.map((j,B)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-blue-300 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-gray-900 text-sm mb-1",children:[["1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£"][B]," ",j.home_name," vs ",j.away_name]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-2",children:[e.jsx(jt,{className:"w-3 h-3"}),new Date(j.date_unix*1e3).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("span",{children:j.league_name||"Bilinmiyor"})]})]}),e.jsxs("div",{className:`px-2 py-1 rounded text-xs font-bold ${j.confidence>=70?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[j.confidence>=70?"ðŸ”¥":"â­"," ",j.confidence]})]}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"w-3 h-3"}),e.jsx("span",{children:j.reason})]}),j.xg&&e.jsxs("div",{className:"text-gray-500",children:["xG: ",j.xg.home?.toFixed(1)," - ",j.xg.away?.toFixed(1)]})]})]},j.fs_id))}),e.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:e.jsxs("button",{onClick:()=>S(c),disabled:f===c.market,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:[e.jsx(pt,{className:"w-5 h-5"}),f===c.market?"YayÄ±nlanÄ±yor...":"Telegram'a YayÄ±nla"]})})]},c.market))})]})})}export{Bt as AdminBotDetail,zt as AdminBots,_t as AdminDashboard,St as AdminKomutaMerkezi,$t as AdminLayout,Tt as AdminLogs,At as AdminManualPredictions,Ct as AdminPredictions,Mt as TelegramDailyLists,ct as TelegramMatchCard,ht as TelegramPreview,Lt as TelegramPublisher};
